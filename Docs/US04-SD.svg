<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1224px" preserveAspectRatio="none" style="width:1901px;height:1224px;background:#FFFFFF;" version="1.1" viewBox="0 0 1901 1224" width="1901px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="185" x="857" y="30.1074">Review and rate a product</text><rect fill="#FFFFFF" height="850.3145" style="stroke:#181818;stroke-width:1.0;" width="10" x="22.5" y="281.6973"/><rect fill="#FFFFFF" height="9" style="stroke:#181818;stroke-width:1.0;" width="10" x="27.5" y="1123.0117"/><rect fill="#FFFFFF" height="819.0234" style="stroke:#181818;stroke-width:1.0;" width="10" x="172.5" y="312.9883"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="267.5" y="682.5195"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="383.5" y="758.1016"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="499.5" y="833.6836"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="615.5" y="909.2656"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="731.5" y="984.8477"/><rect fill="#FFFFFF" height="747.4414" style="stroke:#181818;stroke-width:1.0;" width="10" x="847.5" y="344.2793"/><rect fill="#FFFFFF" height="756.4414" style="stroke:#181818;stroke-width:1.0;" width="10" x="1072.5" y="375.5703"/><rect fill="#FFFFFF" height="582.9863" style="stroke:#181818;stroke-width:1.0;" width="10" x="1077.5" y="477.4434"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1326.5" y="406.8613"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1660.5" y="588.6465"/><rect fill="#FFFFFF" height="975.4785" style="stroke:#181818;stroke-width:1.0;" width="10" x="1831.5" y="156.5332"/><rect fill="#FFFFFF" height="944.1875" style="stroke:#181818;stroke-width:1.0;" width="10" x="1836.5" y="187.8242"/><rect fill="#FFFFFF" height="912.8965" style="stroke:#181818;stroke-width:1.0;" width="10" x="1841.5" y="219.1152"/><rect fill="#FFFFFF" height="881.6055" style="stroke:#181818;stroke-width:1.0;" width="10" x="1846.5" y="250.4063"/><rect fill="#FFFFFF" height="850.3145" style="stroke:#181818;stroke-width:1.0;" width="10" x="1851.5" y="281.6973"/><rect fill="#FFFFFF" height="480.7832" style="stroke:#181818;stroke-width:1.0;" width="10" x="1856.5" y="651.2285"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="27" x2="27" y1="123.2422" y2="1141.0117"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="177" x2="177" y1="123.2422" y2="1141.0117"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="272" x2="272" y1="123.2422" y2="1141.0117"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="388" x2="388" y1="123.2422" y2="1141.0117"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="504" x2="504" y1="123.2422" y2="1141.0117"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="620.5" x2="620.5" y1="123.2422" y2="1141.0117"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="736.5" x2="736.5" y1="123.2422" y2="1141.0117"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="852" x2="852" y1="123.2422" y2="1141.0117"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1077" x2="1077" y1="123.2422" y2="1141.0117"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1331" x2="1331" y1="123.2422" y2="1141.0117"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1501" x2="1501" y1="522.2539" y2="1141.0117"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1665" x2="1665" y1="123.2422" y2="1141.0117"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1836" x2="1836" y1="123.2422" y2="1141.0117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="5" y="119.7285">ACME</text><ellipse cx="27.5" cy="53.1211" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M27.5,61.1211 L27.5,88.1211 M14.5,69.1211 L40.5,69.1211 M27.5,88.1211 L14.5,103.1211 M27.5,88.1211 L40.5,103.1211 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="5" y="1155.1191">ACME</text><ellipse cx="27.5" cy="1167.1328" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M27.5,1175.1328 L27.5,1202.1328 M14.5,1183.1328 L40.5,1183.1328 M27.5,1202.1328 L14.5,1217.1328 M27.5,1202.1328 L40.5,1217.1328 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="137" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="144" y="111.7285">:ReviewC1</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="137" y="1140.0117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="144" y="1162.1191">:ReviewC1</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89" x="228" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="235" y="111.7285">:ReviewC_n</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89" x="228" y="1140.0117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="235" y="1162.1191">:ReviewC_n</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65" x="356" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="363" y="111.7285">:VoteC1</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65" x="356" y="1140.0117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="363" y="1162.1191">:VoteC1</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="73" x="468" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="475" y="111.7285">:VoteC_n</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="73" x="468" y="1140.0117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="475" y="1162.1191">:VoteC_n</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82" x="579.5" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="586.5" y="111.7285">:ReviewQ1</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82" x="579.5" y="1140.0117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="586.5" y="1162.1191">:ReviewQ1</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="691.5" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="698.5" y="111.7285">:ReviewQ_n</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="691.5" y="1140.0117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="698.5" y="1162.1191">:ReviewQ_n</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121" x="792" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="799" y="111.7285">ReviewController</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121" x="792" y="1140.0117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="799" y="1162.1191">ReviewController</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197" x="979" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183" x="986" y="111.7285">reviewService:ReviewService</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197" x="979" y="1140.0117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183" x="986" y="1162.1191">reviewService:ReviewService</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="217" x="1223" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="203" x="1230" y="111.7285">productRepo:ProductRepository</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="217" x="1223" y="1140.0117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="203" x="1230" y="1162.1191">productRepo:ProductRepository</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="1450" y="1140.0117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="1457" y="1162.1191">review:Review</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="205" x="1563" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="191" x="1570" y="111.7285">reviewRepo:ReviewRepository</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="205" x="1563" y="1140.0117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="191" x="1570" y="1162.1191">reviewRepo:ReviewRepository</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117" x="1778" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="1785" y="111.7285">:MessageBroker</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117" x="1778" y="1140.0117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="1785" y="1162.1191">:MessageBroker</text><rect fill="#FFFFFF" height="850.3145" style="stroke:#181818;stroke-width:1.0;" width="10" x="22.5" y="281.6973"/><rect fill="#FFFFFF" height="9" style="stroke:#181818;stroke-width:1.0;" width="10" x="27.5" y="1123.0117"/><rect fill="#FFFFFF" height="819.0234" style="stroke:#181818;stroke-width:1.0;" width="10" x="172.5" y="312.9883"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="267.5" y="682.5195"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="383.5" y="758.1016"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="499.5" y="833.6836"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="615.5" y="909.2656"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="731.5" y="984.8477"/><rect fill="#FFFFFF" height="747.4414" style="stroke:#181818;stroke-width:1.0;" width="10" x="847.5" y="344.2793"/><rect fill="#FFFFFF" height="756.4414" style="stroke:#181818;stroke-width:1.0;" width="10" x="1072.5" y="375.5703"/><rect fill="#FFFFFF" height="582.9863" style="stroke:#181818;stroke-width:1.0;" width="10" x="1077.5" y="477.4434"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1326.5" y="406.8613"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1660.5" y="588.6465"/><rect fill="#FFFFFF" height="975.4785" style="stroke:#181818;stroke-width:1.0;" width="10" x="1831.5" y="156.5332"/><rect fill="#FFFFFF" height="944.1875" style="stroke:#181818;stroke-width:1.0;" width="10" x="1836.5" y="187.8242"/><rect fill="#FFFFFF" height="912.8965" style="stroke:#181818;stroke-width:1.0;" width="10" x="1841.5" y="219.1152"/><rect fill="#FFFFFF" height="881.6055" style="stroke:#181818;stroke-width:1.0;" width="10" x="1846.5" y="250.4063"/><rect fill="#FFFFFF" height="850.3145" style="stroke:#181818;stroke-width:1.0;" width="10" x="1851.5" y="281.6973"/><rect fill="#FFFFFF" height="480.7832" style="stroke:#181818;stroke-width:1.0;" width="10" x="1856.5" y="651.2285"/><polygon fill="#181818" points="1819.5,152.5332,1829.5,156.5332,1819.5,160.5332,1823.5,156.5332" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="272.5" x2="1825.5" y1="156.5332" y2="156.5332"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="279.5" y="151.2705">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="290.5" y="151.2705">subscribe "Review.created"</text><polygon fill="#181818" points="1824.5,183.8242,1834.5,187.8242,1824.5,191.8242,1828.5,187.8242" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="388.5" x2="1830.5" y1="187.8242" y2="187.8242"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="395.5" y="182.5615">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="406.5" y="182.5615">subscribe "Review.created"</text><polygon fill="#181818" points="1829.5,215.1152,1839.5,219.1152,1829.5,223.1152,1833.5,219.1152" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="504.5" x2="1835.5" y1="219.1152" y2="219.1152"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="511.5" y="213.8525">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="522.5" y="213.8525">subscribe "Review.created"</text><polygon fill="#181818" points="1834.5,246.4063,1844.5,250.4063,1834.5,254.4063,1838.5,250.4063" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="620.5" x2="1840.5" y1="250.4063" y2="250.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="627.5" y="245.1436">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="638.5" y="245.1436">subscribe "Review.created"</text><polygon fill="#181818" points="1839.5,277.6973,1849.5,281.6973,1839.5,285.6973,1843.5,281.6973" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="736.5" x2="1845.5" y1="281.6973" y2="281.6973"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="743.5" y="276.4346">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="754.5" y="276.4346">subscribe "Review.created"</text><polygon fill="#181818" points="160.5,308.9883,170.5,312.9883,160.5,316.9883,164.5,312.9883" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="32.5" x2="166.5" y1="312.9883" y2="312.9883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="39.5" y="307.7256">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="50.5" y="307.7256">POST/reviews{sku}</text><polygon fill="#181818" points="835.5,340.2793,845.5,344.2793,835.5,348.2793,839.5,344.2793" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="182.5" x2="841.5" y1="344.2793" y2="344.2793"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="189.5" y="339.0166">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="200.5" y="339.0166">POST/reviews{sku}</text><polygon fill="#181818" points="1060.5,371.5703,1070.5,375.5703,1060.5,379.5703,1064.5,375.5703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="857.5" x2="1066.5" y1="375.5703" y2="375.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="864.5" y="370.3076">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="875.5" y="370.3076">create(reviewDTO, sku, request)</text><polygon fill="#181818" points="1314.5,402.8613,1324.5,406.8613,1314.5,410.8613,1318.5,406.8613" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1082.5" x2="1320.5" y1="406.8613" y2="406.8613"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="1089.5" y="401.5986">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214" x="1100.5" y="401.5986">productRepo.findBySkuProduct(sku);</text><polygon fill="#181818" points="1093.5,434.1523,1083.5,438.1523,1093.5,442.1523,1089.5,438.1523" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1087.5" x2="1330.5" y1="438.1523" y2="438.1523"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1099.5" y="432.8896">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="1117.5" y="432.8896">product</text><line style="stroke:#181818;stroke-width:1.0;" x1="1082.5" x2="1129.5" y1="464.4434" y2="464.4434"/><line style="stroke:#181818;stroke-width:1.0;" x1="1129.5" x2="1129.5" y1="464.4434" y2="477.4434"/><line style="stroke:#181818;stroke-width:1.0;" x1="1088.5" x2="1129.5" y1="477.4434" y2="477.4434"/><polygon fill="#181818" points="1098.5,473.4434,1088.5,477.4434,1098.5,481.4434,1094.5,477.4434" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1094.5" y="459.1807">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="1112.5" y="459.1807">jwt = parseJwt(request)</text><polygon fill="#181818" points="1438,509.7344,1448,513.7344,1438,517.7344,1442,513.7344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1087.5" x2="1444" y1="513.7344" y2="513.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1094.5" y="508.4717">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="1112.5" y="508.4717">create(reviewDTO,sku,user.getId())</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="1450" y="490.4434"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="1457" y="512.5508">review:Review</text><polygon fill="#181818" points="1098.5,553.3555,1088.5,557.3555,1098.5,561.3555,1094.5,557.3555" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1092.5" x2="1500.5" y1="557.3555" y2="557.3555"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1104.5" y="552.0928">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="1122.5" y="552.0928">review</text><polygon fill="#181818" points="1648.5,584.6465,1658.5,588.6465,1648.5,592.6465,1652.5,588.6465" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1087.5" x2="1654.5" y1="588.6465" y2="588.6465"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1094.5" y="583.3838">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="1112.5" y="583.3838">reviewRepo.save(review)</text><polygon fill="#181818" points="1098.5,615.9375,1088.5,619.9375,1098.5,623.9375,1094.5,619.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1092.5" x2="1664.5" y1="619.9375" y2="619.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1104.5" y="614.6748">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="1122.5" y="614.6748">ok</text><polygon fill="#181818" points="1844.5,647.2285,1854.5,651.2285,1844.5,655.2285,1848.5,651.2285" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1087.5" x2="1850.5" y1="651.2285" y2="651.2285"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1094.5" y="645.9658">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="1112.5" y="645.9658">publish "Review.created, {Review}"</text><polygon fill="#181818" points="288.5,678.5195,278.5,682.5195,288.5,686.5195,284.5,682.5195" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="282.5" x2="1855.5" y1="682.5195" y2="682.5195"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="294.5" y="677.2568">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="312.5" y="677.2568">notify "Review.created, {Review}"</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="277.5" x2="319.5" y1="718.8105" y2="718.8105"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="319.5" x2="319.5" y1="718.8105" y2="731.8105"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="272.5" x2="319.5" y1="731.8105" y2="731.8105"/><polygon fill="#181818" points="282.5,727.8105,272.5,731.8105,282.5,735.8105,278.5,731.8105" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="284.5" y="713.5479">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="302.5" y="713.5479">save(Review)</text><polygon fill="#181818" points="404.5,754.1016,394.5,758.1016,404.5,762.1016,400.5,758.1016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="398.5" x2="1855.5" y1="758.1016" y2="758.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="410.5" y="752.8389">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="428.5" y="752.8389">notify "Review.created, {Review}"</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="393.5" x2="435.5" y1="794.3926" y2="794.3926"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="435.5" x2="435.5" y1="794.3926" y2="807.3926"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="388.5" x2="435.5" y1="807.3926" y2="807.3926"/><polygon fill="#181818" points="398.5,803.3926,388.5,807.3926,398.5,811.3926,394.5,807.3926" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="400.5" y="789.1299">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="418.5" y="789.1299">save(Review)</text><polygon fill="#181818" points="520.5,829.6836,510.5,833.6836,520.5,837.6836,516.5,833.6836" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="514.5" x2="1855.5" y1="833.6836" y2="833.6836"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="526.5" y="828.4209">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="544.5" y="828.4209">notify "Review.created, {Review}"</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="509.5" x2="551.5" y1="869.9746" y2="869.9746"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="551.5" x2="551.5" y1="869.9746" y2="882.9746"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="504.5" x2="551.5" y1="882.9746" y2="882.9746"/><polygon fill="#181818" points="514.5,878.9746,504.5,882.9746,514.5,886.9746,510.5,882.9746" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="516.5" y="864.7119">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="534.5" y="864.7119">save(Review)</text><polygon fill="#181818" points="636.5,905.2656,626.5,909.2656,636.5,913.2656,632.5,909.2656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="630.5" x2="1855.5" y1="909.2656" y2="909.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="642.5" y="904.0029">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="660.5" y="904.0029">notify "Review.created, {Review}"</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="625.5" x2="667.5" y1="945.5566" y2="945.5566"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="667.5" x2="667.5" y1="945.5566" y2="958.5566"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="620.5" x2="667.5" y1="958.5566" y2="958.5566"/><polygon fill="#181818" points="630.5,954.5566,620.5,958.5566,630.5,962.5566,626.5,958.5566" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="632.5" y="940.2939">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="650.5" y="940.2939">save(Review)</text><polygon fill="#181818" points="752.5,980.8477,742.5,984.8477,752.5,988.8477,748.5,984.8477" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="746.5" x2="1855.5" y1="984.8477" y2="984.8477"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="758.5" y="979.585">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="776.5" y="979.585">notify "Review.created, {Review}"</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="741.5" x2="783.5" y1="1021.1387" y2="1021.1387"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="783.5" x2="783.5" y1="1021.1387" y2="1034.1387"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="736.5" x2="783.5" y1="1034.1387" y2="1034.1387"/><polygon fill="#181818" points="746.5,1030.1387,736.5,1034.1387,746.5,1038.1387,742.5,1034.1387" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="748.5" y="1015.876">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="766.5" y="1015.876">save(Review)</text><polygon fill="#181818" points="868.5,1056.4297,858.5,1060.4297,868.5,1064.4297,864.5,1060.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="862.5" x2="1071.5" y1="1060.4297" y2="1060.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="874.5" y="1055.167">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="892.5" y="1055.167">ok</text><polygon fill="#181818" points="193.5,1087.7207,183.5,1091.7207,193.5,1095.7207,189.5,1091.7207" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="187.5" x2="851.5" y1="1091.7207" y2="1091.7207"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="199.5" y="1086.458">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="217.5" y="1086.458">ok</text><polygon fill="#181818" points="48.5,1119.0117,38.5,1123.0117,48.5,1127.0117,44.5,1123.0117" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="42.5" x2="171.5" y1="1123.0117" y2="1123.0117"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="54.5" y="1117.749">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="72.5" y="1117.749">ok</text><!--MD5=[d944e17a3e5d8dba351d404c1c338521]
@startuml
'https://plantuml.com/sequence-diagram
title Review and rate a product
autoactivate on
autonumber

actor "ACME" as User

participant ":ReviewC1" as reviewC
participant ":ReviewC_n" as reviewC_n
participant ":VoteC1" as voteC
participant ":VoteC_n" as voteC_n
participant ":ReviewQ1" as reviewQ
participant ":ReviewQ_n" as reviewQ_n

participant "ReviewController" as Ctrl
participant "reviewService:ReviewService" as Svc
participant "productRepo:ProductRepository" as repository
participant "review:Review" as review
participant "reviewRepo:ReviewRepository" as Repo

participant ":MessageBroker" as broker


reviewC_n -> broker: subscribe "Review.created"
voteC -> broker: subscribe "Review.created"
voteC_n -> broker: subscribe "Review.created"
reviewQ -> broker: subscribe "Review.created"
reviewQ_n -> broker: subscribe "Review.created"

activate User
User -> reviewC : POST/reviews{sku}
reviewC -> Ctrl: POST/reviews{sku}


Ctrl -> Svc : create(reviewDTO, sku, request)
Svc -> repository : productRepo.findBySkuProduct(sku);
repository - -> Svc : product

Svc -> Svc: jwt = parseJwt(request)



Svc -> review** : create(reviewDTO,sku,user.getId())
review - -> Svc :  review
Svc -> Repo : reviewRepo.save(review)
Repo - -> Svc : ok

Svc -> broker: publish "Review.created, {Review}"
reviewC_n <- broker: notify "Review.created, {Review}"
reviewC_n - -> reviewC_n: save(Review)
voteC <- broker: notify "Review.created, {Review}"
voteC - -> voteC: save(Review)
voteC_n <- broker: notify "Review.created, {Review}"
voteC_n - -> voteC_n: save(Review)
reviewQ <- broker: notify "Review.created, {Review}"
reviewQ - -> reviewQ: save(Review)
reviewQ_n <- broker: notify "Review.created, {Review}"
reviewQ_n - -> reviewQ_n: save(Review)
Svc - -> Ctrl : ok
Ctrl - -> reviewC : ok
reviewC -> User: ok

@enduml

@startuml
title Review and rate a product
autoactivate on
autonumber

actor "ACME" as User

participant ":ReviewC1" as reviewC
participant ":ReviewC_n" as reviewC_n
participant ":VoteC1" as voteC
participant ":VoteC_n" as voteC_n
participant ":ReviewQ1" as reviewQ
participant ":ReviewQ_n" as reviewQ_n

participant "ReviewController" as Ctrl
participant "reviewService:ReviewService" as Svc
participant "productRepo:ProductRepository" as repository
participant "review:Review" as review
participant "reviewRepo:ReviewRepository" as Repo

participant ":MessageBroker" as broker


reviewC_n -> broker: subscribe "Review.created"
voteC -> broker: subscribe "Review.created"
voteC_n -> broker: subscribe "Review.created"
reviewQ -> broker: subscribe "Review.created"
reviewQ_n -> broker: subscribe "Review.created"

activate User
User -> reviewC : POST/reviews{sku}
reviewC -> Ctrl: POST/reviews{sku}


Ctrl -> Svc : create(reviewDTO, sku, request)
Svc -> repository : productRepo.findBySkuProduct(sku);
repository - -> Svc : product

Svc -> Svc: jwt = parseJwt(request)



Svc -> review** : create(reviewDTO,sku,user.getId())
review - -> Svc :  review
Svc -> Repo : reviewRepo.save(review)
Repo - -> Svc : ok

Svc -> broker: publish "Review.created, {Review}"
reviewC_n <- broker: notify "Review.created, {Review}"
reviewC_n - -> reviewC_n: save(Review)
voteC <- broker: notify "Review.created, {Review}"
voteC - -> voteC: save(Review)
voteC_n <- broker: notify "Review.created, {Review}"
voteC_n - -> voteC_n: save(Review)
reviewQ <- broker: notify "Review.created, {Review}"
reviewQ - -> reviewQ: save(Review)
reviewQ_n <- broker: notify "Review.created, {Review}"
reviewQ_n - -> reviewQ_n: save(Review)
Svc - -> Ctrl : ok
Ctrl - -> reviewC : ok
reviewC -> User: ok

@enduml

PlantUML version 1.2022.13(Sat Nov 19 13:22:17 WET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>