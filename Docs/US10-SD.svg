<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1263px" preserveAspectRatio="none" style="width:2177px;height:1263px;background:#FFFFFF;" version="1.1" viewBox="0 0 2177 1263" width="2177px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="250" x="961.75" y="30.1074">Approve or reject a pending review</text><rect fill="#FFFFFF" height="889.5664" style="stroke:#181818;stroke-width:1.0;" width="10" x="21" y="281.6973"/><rect fill="#FFFFFF" height="9" style="stroke:#181818;stroke-width:1.0;" width="10" x="26" y="1162.2637"/><rect fill="#FFFFFF" height="858.2754" style="stroke:#181818;stroke-width:1.0;" width="10" x="253" y="312.9883"/><rect fill="#FFFFFF" height="40.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="258" y="1130.9727"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="339.5" y="721.7715"/><rect fill="#FFFFFF" height="373.9102" style="stroke:#181818;stroke-width:1.0;" width="10" x="468.5" y="797.3535"/><rect fill="#FFFFFF" height="334.6191" style="stroke:#181818;stroke-width:1.0;" width="10" x="473.5" y="836.6445"/><rect fill="#FFFFFF" height="298.3281" style="stroke:#181818;stroke-width:1.0;" width="10" x="597.5" y="872.9355"/><rect fill="#FFFFFF" height="259.0371" style="stroke:#181818;stroke-width:1.0;" width="10" x="602.5" y="912.2266"/><rect fill="#FFFFFF" height="222.7461" style="stroke:#181818;stroke-width:1.0;" width="10" x="726.5" y="948.5176"/><rect fill="#FFFFFF" height="183.4551" style="stroke:#181818;stroke-width:1.0;" width="10" x="731.5" y="987.8086"/><rect fill="#FFFFFF" height="147.1641" style="stroke:#181818;stroke-width:1.0;" width="10" x="855.5" y="1024.0996"/><rect fill="#FFFFFF" height="107.873" style="stroke:#181818;stroke-width:1.0;" width="10" x="860.5" y="1063.3906"/><rect fill="#FFFFFF" height="826.9844" style="stroke:#181818;stroke-width:1.0;" width="10" x="984.5" y="344.2793"/><rect fill="#FFFFFF" height="71.582" style="stroke:#181818;stroke-width:1.0;" width="10" x="989.5" y="1099.6816"/><rect fill="#FFFFFF" height="795.6934" style="stroke:#181818;stroke-width:1.0;" width="10" x="1297.5" y="375.5703"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1636.5" y="620.8984"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1872.5" y="406.8613"/><rect fill="#FFFFFF" height="93.873" style="stroke:#181818;stroke-width:1.0;" width="10" x="1872.5" y="469.4434"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="2049.5" y="500.7344"/><rect fill="#FFFFFF" height="1014.7305" style="stroke:#181818;stroke-width:1.0;" width="10" x="2137" y="156.5332"/><rect fill="#FFFFFF" height="983.4395" style="stroke:#181818;stroke-width:1.0;" width="10" x="2142" y="187.8242"/><rect fill="#FFFFFF" height="952.1484" style="stroke:#181818;stroke-width:1.0;" width="10" x="2147" y="219.1152"/><rect fill="#FFFFFF" height="920.8574" style="stroke:#181818;stroke-width:1.0;" width="10" x="2152" y="250.4063"/><rect fill="#FFFFFF" height="889.5664" style="stroke:#181818;stroke-width:1.0;" width="10" x="2157" y="281.6973"/><rect fill="#FFFFFF" height="480.7832" style="stroke:#181818;stroke-width:1.0;" width="10" x="2162" y="690.4805"/><rect fill="none" height="81.873" style="stroke:#000000;stroke-width:1.5;" width="577" x="1194" y="578.3164"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="26" x2="26" y1="123.2422" y2="1180.2637"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="257.5" x2="257.5" y1="123.2422" y2="1180.2637"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="344.5" x2="344.5" y1="123.2422" y2="1180.2637"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="473" x2="473" y1="123.2422" y2="1180.2637"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="602" x2="602" y1="123.2422" y2="1180.2637"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="731" x2="731" y1="123.2422" y2="1180.2637"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="860" x2="860" y1="123.2422" y2="1180.2637"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="989" x2="989" y1="123.2422" y2="1180.2637"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1302" x2="1302" y1="123.2422" y2="1180.2637"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1641" x2="1641" y1="123.2422" y2="1180.2637"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1877" x2="1877" y1="123.2422" y2="1180.2637"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2054.5" x2="2054.5" y1="123.2422" y2="1180.2637"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2141.5" x2="2141.5" y1="123.2422" y2="1180.2637"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="5" y="119.7285">Client</text><ellipse cx="26" cy="53.1211" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M26,61.1211 L26,88.1211 M13,69.1211 L39,69.1211 M26,88.1211 L13,103.1211 M26,88.1211 L39,103.1211 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="5" y="1194.3711">Client</text><ellipse cx="26" cy="1206.3848" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M26,1214.3848 L26,1241.3848 M13,1222.3848 L39,1222.3848 M26,1241.3848 L13,1256.3848 M26,1241.3848 L39,1256.3848 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="73" x="221.5" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="228.5" y="111.7285">:ReviewC</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="73" x="221.5" y="1179.2637"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="228.5" y="1201.3711">:ReviewC</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="304.5" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="311.5" y="111.7285">reviewC_n</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="304.5" y="1179.2637"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="311.5" y="1201.3711">reviewC_n</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65" x="441" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="448" y="111.7285">reviewQ</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65" x="441" y="1179.2637"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="448" y="1201.3711">reviewQ</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="562" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="569" y="111.7285">reviewQ_n</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="562" y="1179.2637"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="569" y="1201.3711">reviewQ_n</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="51" x="706" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="713" y="111.7285">voteC</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="51" x="706" y="1179.2637"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="713" y="1201.3711">voteC</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="67" x="827" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="834" y="111.7285">voteC_n</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="67" x="827" y="1179.2637"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="834" y="1201.3711">voteC_n</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="919" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="926" y="111.7285">ModeratorController</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="919" y="1179.2637"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="926" y="1201.3711">ModeratorController</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197" x="1204" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183" x="1211" y="111.7285">reviewService:ReviewService</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197" x="1204" y="1179.2637"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183" x="1211" y="1201.3711">reviewService:ReviewService</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="239" x="1522" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="225" x="1529" y="111.7285">reviewRepository:ReviewRepository</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="239" x="1522" y="1179.2637"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="225" x="1529" y="1201.3711">reviewRepository:ReviewRepository</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="213" x="1771" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="199" x="1778" y="111.7285">requestService:RequestService</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="213" x="1771" y="1179.2637"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="199" x="1778" y="1201.3711">requestService:RequestService</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="2004.5" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="2011.5" y="111.7285">:AuthInstance</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="2004.5" y="1179.2637"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="2011.5" y="1201.3711">:AuthInstance</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="2114.5" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="2121.5" y="111.7285">broker</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="2114.5" y="1179.2637"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="2121.5" y="1201.3711">broker</text><rect fill="#FFFFFF" height="889.5664" style="stroke:#181818;stroke-width:1.0;" width="10" x="21" y="281.6973"/><rect fill="#FFFFFF" height="9" style="stroke:#181818;stroke-width:1.0;" width="10" x="26" y="1162.2637"/><rect fill="#FFFFFF" height="858.2754" style="stroke:#181818;stroke-width:1.0;" width="10" x="253" y="312.9883"/><rect fill="#FFFFFF" height="40.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="258" y="1130.9727"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="339.5" y="721.7715"/><rect fill="#FFFFFF" height="373.9102" style="stroke:#181818;stroke-width:1.0;" width="10" x="468.5" y="797.3535"/><rect fill="#FFFFFF" height="334.6191" style="stroke:#181818;stroke-width:1.0;" width="10" x="473.5" y="836.6445"/><rect fill="#FFFFFF" height="298.3281" style="stroke:#181818;stroke-width:1.0;" width="10" x="597.5" y="872.9355"/><rect fill="#FFFFFF" height="259.0371" style="stroke:#181818;stroke-width:1.0;" width="10" x="602.5" y="912.2266"/><rect fill="#FFFFFF" height="222.7461" style="stroke:#181818;stroke-width:1.0;" width="10" x="726.5" y="948.5176"/><rect fill="#FFFFFF" height="183.4551" style="stroke:#181818;stroke-width:1.0;" width="10" x="731.5" y="987.8086"/><rect fill="#FFFFFF" height="147.1641" style="stroke:#181818;stroke-width:1.0;" width="10" x="855.5" y="1024.0996"/><rect fill="#FFFFFF" height="107.873" style="stroke:#181818;stroke-width:1.0;" width="10" x="860.5" y="1063.3906"/><rect fill="#FFFFFF" height="826.9844" style="stroke:#181818;stroke-width:1.0;" width="10" x="984.5" y="344.2793"/><rect fill="#FFFFFF" height="71.582" style="stroke:#181818;stroke-width:1.0;" width="10" x="989.5" y="1099.6816"/><rect fill="#FFFFFF" height="795.6934" style="stroke:#181818;stroke-width:1.0;" width="10" x="1297.5" y="375.5703"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1636.5" y="620.8984"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1872.5" y="406.8613"/><rect fill="#FFFFFF" height="93.873" style="stroke:#181818;stroke-width:1.0;" width="10" x="1872.5" y="469.4434"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="2049.5" y="500.7344"/><rect fill="#FFFFFF" height="1014.7305" style="stroke:#181818;stroke-width:1.0;" width="10" x="2137" y="156.5332"/><rect fill="#FFFFFF" height="983.4395" style="stroke:#181818;stroke-width:1.0;" width="10" x="2142" y="187.8242"/><rect fill="#FFFFFF" height="952.1484" style="stroke:#181818;stroke-width:1.0;" width="10" x="2147" y="219.1152"/><rect fill="#FFFFFF" height="920.8574" style="stroke:#181818;stroke-width:1.0;" width="10" x="2152" y="250.4063"/><rect fill="#FFFFFF" height="889.5664" style="stroke:#181818;stroke-width:1.0;" width="10" x="2157" y="281.6973"/><rect fill="#FFFFFF" height="480.7832" style="stroke:#181818;stroke-width:1.0;" width="10" x="2162" y="690.4805"/><polygon fill="#181818" points="2125,152.5332,2135,156.5332,2125,160.5332,2129,156.5332" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="344.5" x2="2131" y1="156.5332" y2="156.5332"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="351.5" y="151.2705">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="362.5" y="151.2705">subscribe "Review.update"</text><polygon fill="#181818" points="2130,183.8242,2140,187.8242,2130,191.8242,2134,187.8242" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="473.5" x2="2136" y1="187.8242" y2="187.8242"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="480.5" y="182.5615">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="491.5" y="182.5615">subscribe "Review.update"</text><polygon fill="#181818" points="2135,215.1152,2145,219.1152,2135,223.1152,2139,219.1152" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="602.5" x2="2141" y1="219.1152" y2="219.1152"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="609.5" y="213.8525">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="620.5" y="213.8525">subscribe "Review.update"</text><polygon fill="#181818" points="2140,246.4063,2150,250.4063,2140,254.4063,2144,250.4063" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="731.5" x2="2146" y1="250.4063" y2="250.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="738.5" y="245.1436">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="749.5" y="245.1436">subscribe "Review.update"</text><polygon fill="#181818" points="2145,277.6973,2155,281.6973,2145,285.6973,2149,281.6973" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="860.5" x2="2151" y1="281.6973" y2="281.6973"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="867.5" y="276.4346">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="878.5" y="276.4346">subscribe "Review.update"</text><polygon fill="#181818" points="241,308.9883,251,312.9883,241,316.9883,245,312.9883" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="31" x2="247" y1="312.9883" y2="312.9883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="38" y="307.7256">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="49" y="307.7256">PUT /moderator/review/{idReview}</text><polygon fill="#181818" points="972.5,340.2793,982.5,344.2793,972.5,348.2793,976.5,344.2793" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="263" x2="978.5" y1="344.2793" y2="344.2793"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="270" y="339.0166">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="281" y="339.0166">PUT /moderator/review/{idReview}</text><polygon fill="#181818" points="1285.5,371.5703,1295.5,375.5703,1285.5,379.5703,1289.5,375.5703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="994.5" x2="1291.5" y1="375.5703" y2="375.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="1001.5" y="370.3076">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="273" x="1012.5" y="370.3076">reviewService.changeStatus(idReview,resource)</text><polygon fill="#181818" points="1860.5,402.8613,1870.5,406.8613,1860.5,410.8613,1864.5,406.8613" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1307.5" x2="1866.5" y1="406.8613" y2="406.8613"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="1314.5" y="401.5986">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="1325.5" y="401.5986">parseJwt(request)</text><polygon fill="#181818" points="1318.5,434.1523,1308.5,438.1523,1318.5,442.1523,1314.5,438.1523" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1312.5" x2="1876.5" y1="438.1523" y2="438.1523"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1324.5" y="432.8896">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="16" x="1342.5" y="432.8896">jwt</text><polygon fill="#181818" points="1860.5,465.4434,1870.5,469.4434,1860.5,473.4434,1864.5,469.4434" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1307.5" x2="1866.5" y1="469.4434" y2="469.4434"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1314.5" y="464.1807">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="1332.5" y="464.1807">makeRequestToAuthentication(jwt)</text><polygon fill="#181818" points="2037.5,496.7344,2047.5,500.7344,2037.5,504.7344,2041.5,500.7344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1882.5" x2="2043.5" y1="500.7344" y2="500.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1889.5" y="495.4717">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="1907.5" y="495.4717">GET /auth/search/{jwt}</text><polygon fill="#181818" points="1893.5,528.0254,1883.5,532.0254,1893.5,536.0254,1889.5,532.0254" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1887.5" x2="2053.5" y1="532.0254" y2="532.0254"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1899.5" y="526.7627">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="1917.5" y="526.7627">user</text><polygon fill="#181818" points="1318.5,559.3164,1308.5,563.3164,1318.5,567.3164,1314.5,563.3164" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1312.5" x2="1876.5" y1="563.3164" y2="563.3164"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1324.5" y="558.0537">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="1342.5" y="558.0537">user</text><path d="M1194,578.3164 L1255,578.3164 L1255,587.6074 L1245,597.6074 L1194,597.6074 L1194,578.3164 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="81.873" style="stroke:#000000;stroke-width:1.5;" width="577" x="1194" y="578.3164"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="1209" y="593.3447">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="176" x="1270" y="592.1865">[user.getRoles = "MODERATOR"]</text><polygon fill="#181818" points="1624.5,616.8984,1634.5,620.8984,1624.5,624.8984,1628.5,620.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1307.5" x2="1630.5" y1="620.8984" y2="620.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1314.5" y="615.6357">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="292" x="1332.5" y="615.6357">reviewRepository.updateReview(resource,idReview)</text><polygon fill="#181818" points="1318.5,648.1895,1308.5,652.1895,1318.5,656.1895,1314.5,652.1895" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1312.5" x2="1640.5" y1="652.1895" y2="652.1895"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1324.5" y="646.9268">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="1342.5" y="646.9268">ok</text><polygon fill="#181818" points="2150,686.4805,2160,690.4805,2150,694.4805,2154,690.4805" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1307.5" x2="2156" y1="690.4805" y2="690.4805"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1314.5" y="685.2178">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="1332.5" y="685.2178">publish "Review.update, {Review}"</text><polygon fill="#181818" points="360.5,717.7715,350.5,721.7715,360.5,725.7715,356.5,721.7715" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="354.5" x2="2161" y1="721.7715" y2="721.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="366.5" y="716.5088">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="384.5" y="716.5088">notify "Review.update"</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="349.5" x2="391.5" y1="758.0625" y2="758.0625"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="391.5" x2="391.5" y1="758.0625" y2="771.0625"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="344.5" x2="391.5" y1="771.0625" y2="771.0625"/><polygon fill="#181818" points="354.5,767.0625,344.5,771.0625,354.5,775.0625,350.5,771.0625" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="356.5" y="752.7998">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="374.5" y="752.7998">update(Review)</text><polygon fill="#181818" points="489.5,793.3535,479.5,797.3535,489.5,801.3535,485.5,797.3535" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="483.5" x2="2161" y1="797.3535" y2="797.3535"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="495.5" y="792.0908">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="513.5" y="792.0908">notify "Review.update"</text><line style="stroke:#181818;stroke-width:1.0;" x1="478.5" x2="525.5" y1="823.6445" y2="823.6445"/><line style="stroke:#181818;stroke-width:1.0;" x1="525.5" x2="525.5" y1="823.6445" y2="836.6445"/><line style="stroke:#181818;stroke-width:1.0;" x1="484.5" x2="525.5" y1="836.6445" y2="836.6445"/><polygon fill="#181818" points="494.5,832.6445,484.5,836.6445,494.5,840.6445,490.5,836.6445" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="490.5" y="818.3818">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="508.5" y="818.3818">update(Review)</text><polygon fill="#181818" points="618.5,868.9355,608.5,872.9355,618.5,876.9355,614.5,872.9355" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="612.5" x2="2161" y1="872.9355" y2="872.9355"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="624.5" y="867.6729">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="642.5" y="867.6729">notify "Review.update"</text><line style="stroke:#181818;stroke-width:1.0;" x1="607.5" x2="654.5" y1="899.2266" y2="899.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="654.5" x2="654.5" y1="899.2266" y2="912.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="613.5" x2="654.5" y1="912.2266" y2="912.2266"/><polygon fill="#181818" points="623.5,908.2266,613.5,912.2266,623.5,916.2266,619.5,912.2266" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="619.5" y="893.9639">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="637.5" y="893.9639">update(Review)</text><polygon fill="#181818" points="747.5,944.5176,737.5,948.5176,747.5,952.5176,743.5,948.5176" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="741.5" x2="2161" y1="948.5176" y2="948.5176"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="753.5" y="943.2549">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="771.5" y="943.2549">notify "Review.update"</text><line style="stroke:#181818;stroke-width:1.0;" x1="736.5" x2="783.5" y1="974.8086" y2="974.8086"/><line style="stroke:#181818;stroke-width:1.0;" x1="783.5" x2="783.5" y1="974.8086" y2="987.8086"/><line style="stroke:#181818;stroke-width:1.0;" x1="742.5" x2="783.5" y1="987.8086" y2="987.8086"/><polygon fill="#181818" points="752.5,983.8086,742.5,987.8086,752.5,991.8086,748.5,987.8086" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="748.5" y="969.5459">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="766.5" y="969.5459">update(Review)</text><polygon fill="#181818" points="876.5,1020.0996,866.5,1024.0996,876.5,1028.0996,872.5,1024.0996" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="870.5" x2="2161" y1="1024.0996" y2="1024.0996"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="882.5" y="1018.8369">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="900.5" y="1018.8369">notify "Review.update"</text><line style="stroke:#181818;stroke-width:1.0;" x1="865.5" x2="912.5" y1="1050.3906" y2="1050.3906"/><line style="stroke:#181818;stroke-width:1.0;" x1="912.5" x2="912.5" y1="1050.3906" y2="1063.3906"/><line style="stroke:#181818;stroke-width:1.0;" x1="871.5" x2="912.5" y1="1063.3906" y2="1063.3906"/><polygon fill="#181818" points="881.5,1059.3906,871.5,1063.3906,881.5,1067.3906,877.5,1063.3906" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="877.5" y="1045.1279">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="895.5" y="1045.1279">update(Review)</text><polygon fill="#181818" points="1010.5,1095.6816,1000.5,1099.6816,1010.5,1103.6816,1006.5,1099.6816" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1004.5" x2="1296.5" y1="1099.6816" y2="1099.6816"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1016.5" y="1094.4189">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="1034.5" y="1094.4189">review</text><polygon fill="#181818" points="279,1126.9727,269,1130.9727,279,1134.9727,275,1130.9727" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="273" x2="988.5" y1="1130.9727" y2="1130.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="285" y="1125.71">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="303" y="1125.71">review</text><polygon fill="#181818" points="47,1158.2637,37,1162.2637,47,1166.2637,43,1162.2637" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="41" x2="257" y1="1162.2637" y2="1162.2637"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="53" y="1157.001">30</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="71" y="1157.001">review</text><!--MD5=[dee985f27c15741686f6c9766722d285]
@startuml
'https://plantuml.com/sequence-diagram

title Approve or reject a pending review
autoactivate on
autonumber

actor "Client" as client

reviewC_n -> broker: subscribe "Review.update"
reviewQ -> broker: subscribe "Review.update"
reviewQ_n -> broker: subscribe "Review.update"
voteC -> broker: subscribe "Review.update"
voteC_n -> broker: subscribe "Review.update"

participant ":ReviewC" as reviewC
participant ":ReviewC_n" as reviewC_n
participant ":ReviewQ" as reviewQ
participant ":ReviewQ_n" as reviewQ_n
participant ":VoteC" as voteC
participant ":VoteC_n" as voteC_n

participant "ModeratorController" as controller
participant "reviewService:ReviewService" as service
participant "reviewRepository:ReviewRepository" as repository
participant "requestService:RequestService" as request
participant ":AuthInstance" as instanceAuth


participant ":MessageBroker" as broker
activate client

client -> reviewC: PUT /moderator/review/{idReview}
reviewC -> controller: PUT /moderator/review/{idReview}
controller -> service : reviewService.changeStatus(idReview,resource)

service -> request : parseJwt(request)
request - -> service: jwt
service -> request: makeRequestToAuthentication(jwt)
request -> instanceAuth: GET /auth/search/{jwt}
instanceAuth - -> request: user
request - -> service: user
alt user.getRoles = "MODERATOR"
    service -> repository: reviewRepository.updateReview(resource,idReview)
    repository - -> service: ok
end
service -> broker:publish "Review.update, {Review}"
reviewC_n <- broker: notify "Review.update"
reviewC_n - -> reviewC_n: update(Review)
reviewQ <- broker: notify "Review.update"
reviewQ -> reviewQ: update(Review)
reviewQ_n <- broker: notify "Review.update"
reviewQ_n -> reviewQ_n: update(Review)
voteC <- broker: notify "Review.update"
voteC -> voteC: update(Review)
voteC_n <- broker: notify "Review.update"
voteC_n -> voteC_n: update(Review)


service -> controller: review
controller -> reviewC: review
reviewC -> client: review

@enduml

@startuml

title Approve or reject a pending review
autoactivate on
autonumber

actor "Client" as client

reviewC_n -> broker: subscribe "Review.update"
reviewQ -> broker: subscribe "Review.update"
reviewQ_n -> broker: subscribe "Review.update"
voteC -> broker: subscribe "Review.update"
voteC_n -> broker: subscribe "Review.update"

participant ":ReviewC" as reviewC
participant ":ReviewC_n" as reviewC_n
participant ":ReviewQ" as reviewQ
participant ":ReviewQ_n" as reviewQ_n
participant ":VoteC" as voteC
participant ":VoteC_n" as voteC_n

participant "ModeratorController" as controller
participant "reviewService:ReviewService" as service
participant "reviewRepository:ReviewRepository" as repository
participant "requestService:RequestService" as request
participant ":AuthInstance" as instanceAuth


participant ":MessageBroker" as broker
activate client

client -> reviewC: PUT /moderator/review/{idReview}
reviewC -> controller: PUT /moderator/review/{idReview}
controller -> service : reviewService.changeStatus(idReview,resource)

service -> request : parseJwt(request)
request - -> service: jwt
service -> request: makeRequestToAuthentication(jwt)
request -> instanceAuth: GET /auth/search/{jwt}
instanceAuth - -> request: user
request - -> service: user
alt user.getRoles = "MODERATOR"
    service -> repository: reviewRepository.updateReview(resource,idReview)
    repository - -> service: ok
end
service -> broker:publish "Review.update, {Review}"
reviewC_n <- broker: notify "Review.update"
reviewC_n - -> reviewC_n: update(Review)
reviewQ <- broker: notify "Review.update"
reviewQ -> reviewQ: update(Review)
reviewQ_n <- broker: notify "Review.update"
reviewQ_n -> reviewQ_n: update(Review)
voteC <- broker: notify "Review.update"
voteC -> voteC: update(Review)
voteC_n <- broker: notify "Review.update"
voteC_n -> voteC_n: update(Review)


service -> controller: review
controller -> reviewC: review
reviewC -> client: review

@enduml

PlantUML version 1.2022.13(Sat Nov 19 13:22:17 WET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>