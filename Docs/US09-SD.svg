<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="769px" preserveAspectRatio="none" style="width:1222px;height:769px;background:#FFFFFF;" version="1.1" viewBox="0 0 1222 769" width="1222px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="188" x="516.25" y="30.1074">Obtain all pending reviews</text><rect fill="#FFFFFF" height="543.9863" style="stroke:#181818;stroke-width:1.0;" width="10" x="21" y="133.2422"/><rect fill="#FFFFFF" height="511.6953" style="stroke:#181818;stroke-width:1.0;" width="10" x="199" y="156.5332"/><rect fill="#FFFFFF" height="449.1133" style="stroke:#181818;stroke-width:1.0;" width="10" x="377" y="187.8242"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="635" y="219.1152"/><rect fill="#FFFFFF" height="50.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="635" y="555.3555"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="865" y="383.5703"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1154.5" y="294.6973"/><rect fill="none" height="234.3672" style="stroke:#000000;stroke-width:1.5;" width="591" x="521.5" y="340.9883"/><rect fill="none" height="138.4941" style="stroke:#000000;stroke-width:1.5;" width="571" x="531.5" y="429.8613"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="26" x2="26" y1="123.2422" y2="686.2285"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="204" x2="204" y1="123.2422" y2="686.2285"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="381.5" x2="381.5" y1="123.2422" y2="686.2285"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="639.5" x2="639.5" y1="123.2422" y2="686.2285"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="869.5" x2="869.5" y1="123.2422" y2="686.2285"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1045.5" x2="1045.5" y1="480.9629" y2="686.2285"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1159.5" x2="1159.5" y1="123.2422" y2="686.2285"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="5" y="119.7285">Client</text><ellipse cx="26" cy="53.1211" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M26,61.1211 L26,88.1211 M13,69.1211 L39,69.1211 M26,88.1211 L13,103.1211 M26,88.1211 L39,103.1211 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="5" y="700.3359">Client</text><ellipse cx="26" cy="712.3496" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M26,720.3496 L26,747.3496 M13,728.3496 L39,728.3496 M26,747.3496 L13,762.3496 M26,747.3496 L39,762.3496 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="159" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="166" y="111.7285">:ReviewQ_n</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="159" y="685.2285"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="166" y="707.3359">:ReviewQ_n</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="311.5" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="318.5" y="111.7285">ModeratorController</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="311.5" y="685.2285"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="318.5" y="707.3359">ModeratorController</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197" x="541.5" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183" x="548.5" y="111.7285">reviewService:ReviewService</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197" x="541.5" y="685.2285"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183" x="548.5" y="707.3359">reviewService:ReviewService</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="239" x="750.5" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="225" x="757.5" y="111.7285">reviewRepository:ReviewRepository</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="239" x="750.5" y="685.2285"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="225" x="757.5" y="707.3359">reviewRepository:ReviewRepository</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="93" x="999.5" y="685.2285"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="1006.5" y="707.3359">:ReviewDTO</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="114" x="1102.5" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="1109.5" y="111.7285">:JWTRepository</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="114" x="1102.5" y="685.2285"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="1109.5" y="707.3359">:JWTRepository</text><rect fill="#FFFFFF" height="543.9863" style="stroke:#181818;stroke-width:1.0;" width="10" x="21" y="133.2422"/><rect fill="#FFFFFF" height="511.6953" style="stroke:#181818;stroke-width:1.0;" width="10" x="199" y="156.5332"/><rect fill="#FFFFFF" height="449.1133" style="stroke:#181818;stroke-width:1.0;" width="10" x="377" y="187.8242"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="635" y="219.1152"/><rect fill="#FFFFFF" height="50.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="635" y="555.3555"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="865" y="383.5703"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1154.5" y="294.6973"/><polygon fill="#181818" points="187,152.5332,197,156.5332,187,160.5332,191,156.5332" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="31" x2="193" y1="156.5332" y2="156.5332"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="38" y="151.2705">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="49" y="151.2705">GET /moderator/reviews</text><polygon fill="#181818" points="365,183.8242,375,187.8242,365,191.8242,369,187.8242" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="209" x2="371" y1="187.8242" y2="187.8242"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="216" y="182.5615">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="227" y="182.5615">GET /moderator/reviews</text><polygon fill="#181818" points="623,215.1152,633,219.1152,623,223.1152,627,219.1152" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="387" x2="629" y1="219.1152" y2="219.1152"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="394" y="213.8525">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="405" y="213.8525">reviewService.findAllReviewsPending()</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="645" x2="687" y1="255.4063" y2="255.4063"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="687" x2="687" y1="255.4063" y2="268.4063"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="640" x2="687" y1="268.4063" y2="268.4063"/><polygon fill="#181818" points="650,264.4063,640,268.4063,650,272.4063,646,268.4063" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="652" y="250.1436">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="663" y="250.1436">parseJwt(request)</text><polygon fill="#181818" points="1142.5,290.6973,1152.5,294.6973,1142.5,298.6973,1146.5,294.6973" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="640" x2="1148.5" y1="294.6973" y2="294.6973"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="647" y="289.4346">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="658" y="289.4346">findByJWT(jwt)</text><polygon fill="#181818" points="651,321.9883,641,325.9883,651,329.9883,647,325.9883" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="645" x2="1158.5" y1="325.9883" y2="325.9883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="657" y="320.7256">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="668" y="320.7256">user</text><path d="M521.5,340.9883 L582.5,340.9883 L582.5,350.2793 L572.5,360.2793 L521.5,360.2793 L521.5,340.9883 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="234.3672" style="stroke:#000000;stroke-width:1.5;" width="591" x="521.5" y="340.9883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="536.5" y="356.0166">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="176" x="597.5" y="354.8584">[user.getRoles = "MODERATOR"]</text><polygon fill="#181818" points="853,379.5703,863,383.5703,853,387.5703,857,383.5703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="640" x2="859" y1="383.5703" y2="383.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="647" y="378.3076">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195" x="658" y="378.3076">reviewRepository.findAllPending();</text><polygon fill="#181818" points="651,410.8613,641,414.8613,651,418.8613,647,414.8613" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="645" x2="869" y1="414.8613" y2="414.8613"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="657" y="409.5986">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="668" y="409.5986">reviews</text><path d="M531.5,429.8613 L604.5,429.8613 L604.5,439.1523 L594.5,449.1523 L531.5,449.1523 L531.5,429.8613 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="138.4941" style="stroke:#000000;stroke-width:1.5;" width="571" x="531.5" y="429.8613"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="546.5" y="444.8896">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="165" x="619.5" y="443.7314">[for each "review" in reviews]</text><polygon fill="#181818" points="987.5,468.4434,997.5,472.4434,987.5,476.4434,991.5,472.4434" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="640" x2="993.5" y1="472.4434" y2="472.4434"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="647" y="467.1807">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="658" y="467.1807">new ReviewUser(review)</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="93" x="999.5" y="449.1523"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="1006.5" y="471.2598">:ReviewDTO</text><polygon fill="#181818" points="651,512.0645,641,516.0645,651,520.0645,647,516.0645" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="645" x2="1045" y1="516.0645" y2="516.0645"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="657" y="510.8018">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="675" y="510.8018">reviewUser</text><line style="stroke:#181818;stroke-width:1.0;" x1="640" x2="687" y1="542.3555" y2="542.3555"/><line style="stroke:#181818;stroke-width:1.0;" x1="687" x2="687" y1="542.3555" y2="555.3555"/><line style="stroke:#181818;stroke-width:1.0;" x1="646" x2="687" y1="555.3555" y2="555.3555"/><polygon fill="#181818" points="656,551.3555,646,555.3555,656,559.3555,652,555.3555" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="652" y="537.0928">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="670" y="537.0928">reviewsPending.add(reviewUser);</text><polygon fill="#181818" points="398,601.6465,388,605.6465,398,609.6465,394,605.6465" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="392" x2="639" y1="605.6465" y2="605.6465"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="404" y="600.3838">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="422" y="600.3838">reviewsPending</text><polygon fill="#181818" points="220,632.9375,210,636.9375,220,640.9375,216,636.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="214" x2="381" y1="636.9375" y2="636.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="226" y="631.6748">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="244" y="631.6748">reviewsPending</text><polygon fill="#181818" points="42,664.2285,32,668.2285,42,672.2285,38,668.2285" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="36" x2="203" y1="668.2285" y2="668.2285"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="48" y="662.9658">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="66" y="662.9658">reviewsPending</text><!--MD5=[b22efe1fa2978f7c236ef725593d74cd]
@startuml
'https://plantuml.com/sequence-diagram

title Obtain all pending reviews
autoactivate on
autonumber

actor "Client" as client
participant ":ReviewQ_n" as reviewQ
participant "ModeratorController" as controller
participant "reviewService:ReviewService" as service
participant "reviewRepository:ReviewRepository" as repository
participant ":ReviewDTO" as reviewUser
participant ":JWTRepository" as jwtRepository

activate client

client -> reviewQ: GET /moderator/reviews
reviewQ -> controller: GET /moderator/reviews
controller -> service : reviewService.findAllReviewsPending()
service - -> service : parseJwt(request)
service -> jwtRepository: findByJWT(jwt)
jwtRepository - -> service: user
alt user.getRoles = "MODERATOR"
service -> repository: reviewRepository.findAllPending();
repository - -> service: reviews
loop for each "review" in reviews
    service -> reviewUser**: new ReviewUser(review)
    reviewUser - -> service: reviewUser
    service -> service: reviewsPending.add(reviewUser);
end loop
end
service - -> controller: reviewsPending
controller - -> reviewQ: reviewsPending
reviewQ - -> client: reviewsPending

@enduml

@startuml

title Obtain all pending reviews
autoactivate on
autonumber

actor "Client" as client
participant ":ReviewQ_n" as reviewQ
participant "ModeratorController" as controller
participant "reviewService:ReviewService" as service
participant "reviewRepository:ReviewRepository" as repository
participant ":ReviewDTO" as reviewUser
participant ":JWTRepository" as jwtRepository

activate client

client -> reviewQ: GET /moderator/reviews
reviewQ -> controller: GET /moderator/reviews
controller -> service : reviewService.findAllReviewsPending()
service - -> service : parseJwt(request)
service -> jwtRepository: findByJWT(jwt)
jwtRepository - -> service: user
alt user.getRoles = "MODERATOR"
service -> repository: reviewRepository.findAllPending();
repository - -> service: reviews
loop for each "review" in reviews
    service -> reviewUser**: new ReviewUser(review)
    reviewUser - -> service: reviewUser
    service -> service: reviewsPending.add(reviewUser);
end loop
end
service - -> controller: reviewsPending
controller - -> reviewQ: reviewsPending
reviewQ - -> client: reviewsPending

@enduml

PlantUML version 1.2022.13(Sat Nov 19 13:22:17 WET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>