<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="731px" preserveAspectRatio="none" style="width:1262px;height:731px;background:#FFFFFF;" version="1.1" viewBox="0 0 1262 731" width="1262px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="25.6406" id="_title" style="stroke:none;stroke-width:1.0;" width="198" x="531" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="188" x="536" y="27.6738">Obtain all pending reviews</text><rect fill="#FFFFFF" height="515.0156" style="stroke:#181818;stroke-width:1.0;" width="10" x="21" y="127.2813"/><rect fill="#FFFFFF" height="485.4922" style="stroke:#181818;stroke-width:1.0;" width="10" x="199" y="147.8047"/><rect fill="#FFFFFF" height="465.9688" style="stroke:#181818;stroke-width:1.0;" width="10" x="457" y="176.3281"/><rect fill="#FFFFFF" height="47.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="462" y="557.25"/><rect fill="#FFFFFF" height="28.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="692" y="399.5156"/><rect fill="#FFFFFF" height="28.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="1031" y="204.8516"/><rect fill="#FFFFFF" height="85.5703" style="stroke:#181818;stroke-width:1.0;" width="10" x="1031" y="261.8984"/><rect fill="#FFFFFF" height="28.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="1201" y="290.4219"/><rect fill="none" height="214.7813" style="stroke:#000000;stroke-width:1.5;" width="596" x="343.5" y="362.4688"/><rect fill="none" height="127.2109" style="stroke:#000000;stroke-width:1.5;" width="576" x="353.5" y="443.0391"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="26" x2="26" y1="117.2813" y2="651.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="203.5" x2="203.5" y1="117.2813" y2="651.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="461.5" x2="461.5" y1="117.2813" y2="651.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="696.5" x2="696.5" y1="117.2813" y2="651.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="872.5" x2="872.5" y1="489.8828" y2="651.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1035.5" x2="1035.5" y1="117.2813" y2="651.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1206" x2="1206" y1="117.2813" y2="651.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="5" y="114.3145">Client</text><ellipse cx="26" cy="50.1406" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M26,58.1406 L26,85.1406 M13,66.1406 L39,66.1406 M26,85.1406 L13,100.1406 M26,85.1406 L39,100.1406 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="5" y="662.9707">Client</text><ellipse cx="26" cy="674.4375" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M26,682.4375 L26,709.4375 M13,690.4375 L39,690.4375 M26,709.4375 L13,724.4375 M26,709.4375 L39,724.4375 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="133.5" y="86.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="140.5" y="106.3145">ModeratorController</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="133.5" y="650.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="140.5" y="669.9707">ModeratorController</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197" x="363.5" y="86.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183" x="370.5" y="106.3145">reviewService:ReviewService</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197" x="363.5" y="650.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183" x="370.5" y="669.9707">reviewService:ReviewService</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="239" x="577.5" y="86.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="225" x="584.5" y="106.3145">reviewRepository:ReviewRepository</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="239" x="577.5" y="650.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="225" x="584.5" y="669.9707">reviewRepository:ReviewRepository</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="93" x="826.5" y="650.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="833.5" y="669.9707">:ReviewDTO</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="213" x="929.5" y="86.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="199" x="936.5" y="106.3145">requestService:RequestService</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="213" x="929.5" y="650.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="199" x="936.5" y="669.9707">requestService:RequestService</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="1156" y="86.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="1163" y="106.3145">:AuthInstance</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="1156" y="650.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="1163" y="669.9707">:AuthInstance</text><rect fill="#FFFFFF" height="515.0156" style="stroke:#181818;stroke-width:1.0;" width="10" x="21" y="127.2813"/><rect fill="#FFFFFF" height="485.4922" style="stroke:#181818;stroke-width:1.0;" width="10" x="199" y="147.8047"/><rect fill="#FFFFFF" height="465.9688" style="stroke:#181818;stroke-width:1.0;" width="10" x="457" y="176.3281"/><rect fill="#FFFFFF" height="47.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="462" y="557.25"/><rect fill="#FFFFFF" height="28.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="692" y="399.5156"/><rect fill="#FFFFFF" height="28.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="1031" y="204.8516"/><rect fill="#FFFFFF" height="85.5703" style="stroke:#181818;stroke-width:1.0;" width="10" x="1031" y="261.8984"/><rect fill="#FFFFFF" height="28.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="1201" y="290.4219"/><polygon fill="#181818" points="187,143.8047,197,147.8047,187,151.8047,191,147.8047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="31" x2="193" y1="147.8047" y2="147.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="38" y="143.0498">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="49" y="143.0498">GET /moderator/reviews</text><polygon fill="#181818" points="445,172.3281,455,176.3281,445,180.3281,449,176.3281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="209" x2="451" y1="176.3281" y2="176.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="216" y="171.5732">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="227" y="171.5732">reviewService.findAllReviewsPending()</text><polygon fill="#181818" points="1019,200.8516,1029,204.8516,1019,208.8516,1023,204.8516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="467" x2="1025" y1="204.8516" y2="204.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="474" y="200.0967">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="485" y="200.0967">parseJwt(request)</text><polygon fill="#181818" points="478,229.375,468,233.375,478,237.375,474,233.375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="472" x2="1035" y1="233.375" y2="233.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="484" y="228.6201">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="16" x="495" y="228.6201">jwt</text><polygon fill="#181818" points="1019,257.8984,1029,261.8984,1019,265.8984,1023,261.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="467" x2="1025" y1="261.8984" y2="261.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="474" y="257.1436">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="485" y="257.1436">makeRequestToAuthentication(jwt)</text><polygon fill="#181818" points="1189,286.4219,1199,290.4219,1189,294.4219,1193,290.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1041" x2="1195" y1="290.4219" y2="290.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="1048" y="285.667">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="1059" y="285.667">GET /auth/search/{jwt}</text><polygon fill="#181818" points="1052,314.9453,1042,318.9453,1052,322.9453,1048,318.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1046" x2="1205" y1="318.9453" y2="318.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="1058" y="314.1904">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="1069" y="314.1904">user</text><polygon fill="#181818" points="478,343.4688,468,347.4688,478,351.4688,474,347.4688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="472" x2="1035" y1="347.4688" y2="347.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="484" y="342.7139">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="495" y="342.7139">user</text><path d="M343.5,362.4688 L404.5,362.4688 L404.5,368.9922 L394.5,378.9922 L343.5,378.9922 L343.5,362.4688 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="214.7813" style="stroke:#000000;stroke-width:1.5;" width="596" x="343.5" y="362.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="358.5" y="375.2373">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="176" x="419.5" y="374.4268">[user.getRoles = "MODERATOR"]</text><polygon fill="#181818" points="680,395.5156,690,399.5156,680,403.5156,684,399.5156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="467" x2="686" y1="399.5156" y2="399.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="474" y="394.7607">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195" x="485" y="394.7607">reviewRepository.findAllPending();</text><polygon fill="#181818" points="478,424.0391,468,428.0391,478,432.0391,474,428.0391" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="472" x2="696" y1="428.0391" y2="428.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="484" y="423.2842">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="502" y="423.2842">reviews</text><path d="M353.5,443.0391 L426.5,443.0391 L426.5,449.5625 L416.5,459.5625 L353.5,459.5625 L353.5,443.0391 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="127.2109" style="stroke:#000000;stroke-width:1.5;" width="576" x="353.5" y="443.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="368.5" y="455.8076">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="165" x="441.5" y="454.9971">[for each "review" in reviews]</text><polygon fill="#181818" points="814.5,476.0859,824.5,480.0859,814.5,484.0859,818.5,480.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="467" x2="820.5" y1="480.0859" y2="480.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="474" y="475.3311">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="492" y="475.3311">new ReviewUser(review)</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="93" x="826.5" y="459.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="833.5" y="479.2363">:ReviewDTO</text><polygon fill="#181818" points="478,516.7266,468,520.7266,478,524.7266,474,520.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="472" x2="872" y1="520.7266" y2="520.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="484" y="515.9717">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="502" y="515.9717">reviewUser</text><line style="stroke:#181818;stroke-width:1.0;" x1="467" x2="514" y1="544.25" y2="544.25"/><line style="stroke:#181818;stroke-width:1.0;" x1="514" x2="514" y1="544.25" y2="557.25"/><line style="stroke:#181818;stroke-width:1.0;" x1="473" x2="514" y1="557.25" y2="557.25"/><polygon fill="#181818" points="483,553.25,473,557.25,483,561.25,479,557.25" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="479" y="539.4951">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="497" y="539.4951">reviewsPending.add(reviewUser);</text><polygon fill="#181818" points="220,600.7734,210,604.7734,220,608.7734,216,604.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="214" x2="456" y1="604.7734" y2="604.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="226" y="600.0186">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="244" y="600.0186">reviewsPending</text><polygon fill="#181818" points="42,629.2969,32,633.2969,42,637.2969,38,633.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="36" x2="203" y1="633.2969" y2="633.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="48" y="628.542">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="66" y="628.542">reviewsPending</text><!--MD5=[bb2f12503469e17b77bd0a7f7ef9ddf7]
@startuml
'https://plantuml.com/sequence-diagram

title Obtain all pending reviews
autoactivate on
autonumber

actor "Client" as client
participant "ModeratorController" as controller
participant "reviewService:ReviewService" as service
participant "reviewRepository:ReviewRepository" as repository
participant ":ReviewDTO" as reviewUser
participant "requestService:RequestService" as request
participant ":AuthInstance" as instanceAuth

activate client

client -> controller: GET /moderator/reviews
controller -> service : reviewService.findAllReviewsPending()
service -> request : parseJwt(request)
request - -> service: jwt
service -> request: makeRequestToAuthentication(jwt)
request -> instanceAuth: GET /auth/search/{jwt}
instanceAuth - -> request: user
request - -> service: user
alt user.getRoles = "MODERATOR"
service -> repository: reviewRepository.findAllPending();
repository - -> service: reviews
loop for each "review" in reviews
    service -> reviewUser**: new ReviewUser(review)
    reviewUser - -> service: reviewUser
    service -> service: reviewsPending.add(reviewUser);
end loop
end
service - -> controller: reviewsPending
controller - -> client: reviewsPending

@enduml

@startuml

title Obtain all pending reviews
autoactivate on
autonumber

actor "Client" as client
participant "ModeratorController" as controller
participant "reviewService:ReviewService" as service
participant "reviewRepository:ReviewRepository" as repository
participant ":ReviewDTO" as reviewUser
participant "requestService:RequestService" as request
participant ":AuthInstance" as instanceAuth

activate client

client -> controller: GET /moderator/reviews
controller -> service : reviewService.findAllReviewsPending()
service -> request : parseJwt(request)
request - -> service: jwt
service -> request: makeRequestToAuthentication(jwt)
request -> instanceAuth: GET /auth/search/{jwt}
instanceAuth - -> request: user
request - -> service: user
alt user.getRoles = "MODERATOR"
service -> repository: reviewRepository.findAllPending();
repository - -> service: reviews
loop for each "review" in reviews
    service -> reviewUser**: new ReviewUser(review)
    reviewUser - -> service: reviewUser
    service -> service: reviewsPending.add(reviewUser);
end loop
end
service - -> controller: reviewsPending
controller - -> client: reviewsPending

@enduml

PlantUML version 1.2022.12(Sun Oct 23 19:12:26 WEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>