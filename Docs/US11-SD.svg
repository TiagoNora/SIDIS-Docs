<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="700px" preserveAspectRatio="none" style="width:1462px;height:700px;background:#FFFFFF;" version="1.1" viewBox="0 0 1462 700" width="1462px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="25.6406" id="_title" style="stroke:none;stroke-width:1.0;" width="312" x="574" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="302" x="579" y="27.6738">Obtain all my reviews including their status</text><rect fill="#FFFFFF" height="484.4922" style="stroke:#181818;stroke-width:1.0;" width="10" x="21" y="127.2813"/><rect fill="#FFFFFF" height="454.9688" style="stroke:#181818;stroke-width:1.0;" width="10" x="215" y="147.8047"/><rect fill="#FFFFFF" height="435.4453" style="stroke:#181818;stroke-width:1.0;" width="10" x="553" y="176.3281"/><rect fill="#FFFFFF" height="40.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="558" y="533.7266"/><rect fill="#FFFFFF" height="28.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="892" y="375.9922"/><rect fill="#FFFFFF" height="28.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="1231" y="204.8516"/><rect fill="#FFFFFF" height="85.5703" style="stroke:#181818;stroke-width:1.0;" width="10" x="1231" y="261.8984"/><rect fill="#FFFFFF" height="28.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="1401" y="290.4219"/><rect fill="none" height="127.2109" style="stroke:#000000;stroke-width:1.5;" width="680" x="449.5" y="419.5156"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="26" x2="26" y1="117.2813" y2="620.7734"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="219.5" x2="219.5" y1="117.2813" y2="620.7734"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="557.5" x2="557.5" y1="117.2813" y2="620.7734"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="896.5" x2="896.5" y1="117.2813" y2="620.7734"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1072.5" x2="1072.5" y1="466.3594" y2="620.7734"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1235.5" x2="1235.5" y1="117.2813" y2="620.7734"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1406" x2="1406" y1="117.2813" y2="620.7734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="5" y="114.3145">Client</text><ellipse cx="26" cy="50.1406" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M26,58.1406 L26,85.1406 M13,66.1406 L39,66.1406 M26,85.1406 L13,100.1406 M26,85.1406 L39,100.1406 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="5" y="632.4473">Client</text><ellipse cx="26" cy="643.9141" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M26,651.9141 L26,678.9141 M13,659.9141 L39,659.9141 M26,678.9141 L13,693.9141 M26,678.9141 L39,693.9141 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121" x="159.5" y="86.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="166.5" y="106.3145">ReviewController</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121" x="159.5" y="619.7734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="166.5" y="639.4473">ReviewController</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197" x="459.5" y="86.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183" x="466.5" y="106.3145">reviewService:ReviewService</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197" x="459.5" y="619.7734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183" x="466.5" y="639.4473">reviewService:ReviewService</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="239" x="777.5" y="86.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="225" x="784.5" y="106.3145">reviewRepository:ReviewRepository</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="239" x="777.5" y="619.7734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="225" x="784.5" y="639.4473">reviewRepository:ReviewRepository</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="93" x="1026.5" y="619.7734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="1033.5" y="639.4473">:ReviewDTO</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="213" x="1129.5" y="86.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="199" x="1136.5" y="106.3145">requestService:RequestService</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="213" x="1129.5" y="619.7734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="199" x="1136.5" y="639.4473">requestService:RequestService</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="1356" y="86.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="1363" y="106.3145">:AuthInstance</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="1356" y="619.7734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="1363" y="639.4473">:AuthInstance</text><rect fill="#FFFFFF" height="484.4922" style="stroke:#181818;stroke-width:1.0;" width="10" x="21" y="127.2813"/><rect fill="#FFFFFF" height="454.9688" style="stroke:#181818;stroke-width:1.0;" width="10" x="215" y="147.8047"/><rect fill="#FFFFFF" height="435.4453" style="stroke:#181818;stroke-width:1.0;" width="10" x="553" y="176.3281"/><rect fill="#FFFFFF" height="40.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="558" y="533.7266"/><rect fill="#FFFFFF" height="28.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="892" y="375.9922"/><rect fill="#FFFFFF" height="28.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="1231" y="204.8516"/><rect fill="#FFFFFF" height="85.5703" style="stroke:#181818;stroke-width:1.0;" width="10" x="1231" y="261.8984"/><rect fill="#FFFFFF" height="28.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="1401" y="290.4219"/><polygon fill="#181818" points="203,143.8047,213,147.8047,203,151.8047,207,147.8047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="31" x2="209" y1="147.8047" y2="147.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="38" y="143.0498">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="49" y="143.0498">GET /reviews/user/{idUser}</text><polygon fill="#181818" points="541,172.3281,551,176.3281,541,180.3281,545,176.3281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="225" x2="547" y1="176.3281" y2="176.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="232" y="171.5732">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="298" x="243" y="171.5732">reviewService.findAllReviewsByUser(idUser,request)</text><polygon fill="#181818" points="1219,200.8516,1229,204.8516,1219,208.8516,1223,204.8516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="563" x2="1225" y1="204.8516" y2="204.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="570" y="200.0967">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="581" y="200.0967">parseJwt(request)</text><polygon fill="#181818" points="574,229.375,564,233.375,574,237.375,570,233.375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="568" x2="1235" y1="233.375" y2="233.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="580" y="228.6201">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="16" x="591" y="228.6201">jwt</text><polygon fill="#181818" points="1219,257.8984,1229,261.8984,1219,265.8984,1223,261.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="563" x2="1225" y1="261.8984" y2="261.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="570" y="257.1436">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="581" y="257.1436">makeRequestToAuthentication(jwt)</text><polygon fill="#181818" points="1389,286.4219,1399,290.4219,1389,294.4219,1393,290.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1241" x2="1395" y1="290.4219" y2="290.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="1248" y="285.667">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="1259" y="285.667">GET /auth/search/{jwt}</text><polygon fill="#181818" points="1252,314.9453,1242,318.9453,1252,322.9453,1248,318.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1246" x2="1405" y1="318.9453" y2="318.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="1258" y="314.1904">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="1269" y="314.1904">user</text><polygon fill="#181818" points="574,343.4688,564,347.4688,574,351.4688,570,347.4688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="568" x2="1235" y1="347.4688" y2="347.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="580" y="342.7139">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="591" y="342.7139">user</text><polygon fill="#181818" points="880,371.9922,890,375.9922,880,379.9922,884,375.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="563" x2="886" y1="375.9922" y2="375.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="570" y="371.2373">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="299" x="581" y="371.2373">reviewRepository.findAllReviewsByUser(user.getId())</text><polygon fill="#181818" points="574,400.5156,564,404.5156,574,408.5156,570,404.5156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="568" x2="896" y1="404.5156" y2="404.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="580" y="399.7607">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="598" y="399.7607">reviews</text><path d="M449.5,419.5156 L522.5,419.5156 L522.5,426.0391 L512.5,436.0391 L449.5,436.0391 L449.5,419.5156 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="127.2109" style="stroke:#000000;stroke-width:1.5;" width="680" x="449.5" y="419.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="464.5" y="432.2842">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="165" x="537.5" y="431.4736">[for each "review" in reviews]</text><polygon fill="#181818" points="1014.5,452.5625,1024.5,456.5625,1014.5,460.5625,1018.5,456.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="563" x2="1020.5" y1="456.5625" y2="456.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="570" y="451.8076">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="588" y="451.8076">new ReviewDTO(review))</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="93" x="1026.5" y="436.0391"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="1033.5" y="455.7129">:ReviewDTO</text><polygon fill="#181818" points="574,493.2031,564,497.2031,574,501.2031,570,497.2031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="568" x2="1072" y1="497.2031" y2="497.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="580" y="492.4482">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="598" y="492.4482">reviewDTO</text><line style="stroke:#181818;stroke-width:1.0;" x1="563" x2="610" y1="520.7266" y2="520.7266"/><line style="stroke:#181818;stroke-width:1.0;" x1="610" x2="610" y1="520.7266" y2="533.7266"/><line style="stroke:#181818;stroke-width:1.0;" x1="569" x2="610" y1="533.7266" y2="533.7266"/><polygon fill="#181818" points="579,529.7266,569,533.7266,579,537.7266,575,533.7266" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="575" y="515.9717">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="593" y="515.9717">reviewsUser.add(reviewDTO);</text><polygon fill="#181818" points="236,570.25,226,574.25,236,578.25,232,574.25" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="230" x2="552" y1="574.25" y2="574.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="242" y="569.4951">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="260" y="569.4951">reviewsDTO</text><polygon fill="#181818" points="42,598.7734,32,602.7734,42,606.7734,38,602.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="36" x2="219" y1="602.7734" y2="602.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="48" y="598.0186">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="66" y="598.0186">list of reviews</text><!--MD5=[cec7b3f8cc24c1867a95956be0b398b4]
@startuml
'https://plantuml.com/sequence-diagram

title Obtain all my reviews including their status
autoactivate on
autonumber

actor "Client" as Client
participant "ReviewController" as Ctrl
participant "reviewService:ReviewService" as service
participant "reviewRepository:ReviewRepository" as Repo
participant ":ReviewDTO" as reviewDTO
participant "requestService:RequestService" as request
participant ":AuthInstance" as instanceAuth

activate Client

Client -> Ctrl : GET /reviews/user/{idUser}
Ctrl -> service : reviewService.findAllReviewsByUser(idUser,request)
service -> request : parseJwt(request)
request - -> service: jwt
service -> request: makeRequestToAuthentication(jwt)
request -> instanceAuth: GET /auth/search/{jwt}
instanceAuth - -> request: user
request - -> service: user
service -> Repo: reviewRepository.findAllReviewsByUser(user.getId())
Repo - -> service: reviews
loop for each "review" in reviews

    service -> reviewDTO**: new ReviewDTO(review))
    reviewDTO - -> service: reviewDTO
    service -> service: reviewsUser.add(reviewDTO);
end loop
service - -> Ctrl: reviewsDTO
Ctrl - -> Client: list of reviews

@enduml

@startuml

title Obtain all my reviews including their status
autoactivate on
autonumber

actor "Client" as Client
participant "ReviewController" as Ctrl
participant "reviewService:ReviewService" as service
participant "reviewRepository:ReviewRepository" as Repo
participant ":ReviewDTO" as reviewDTO
participant "requestService:RequestService" as request
participant ":AuthInstance" as instanceAuth

activate Client

Client -> Ctrl : GET /reviews/user/{idUser}
Ctrl -> service : reviewService.findAllReviewsByUser(idUser,request)
service -> request : parseJwt(request)
request - -> service: jwt
service -> request: makeRequestToAuthentication(jwt)
request -> instanceAuth: GET /auth/search/{jwt}
instanceAuth - -> request: user
request - -> service: user
service -> Repo: reviewRepository.findAllReviewsByUser(user.getId())
Repo - -> service: reviews
loop for each "review" in reviews

    service -> reviewDTO**: new ReviewDTO(review))
    reviewDTO - -> service: reviewDTO
    service -> service: reviewsUser.add(reviewDTO);
end loop
service - -> Ctrl: reviewsDTO
Ctrl - -> Client: list of reviews

@enduml

PlantUML version 1.2022.12(Sun Oct 23 19:12:26 WEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>