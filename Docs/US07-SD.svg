<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="673px" preserveAspectRatio="none" style="width:1302px;height:673px;background:#FFFFFF;" version="1.1" viewBox="0 0 1302 673" width="1302px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="25.6406" id="_title" style="stroke:none;stroke-width:1.0;" width="207" x="546.75" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="197" x="551.75" y="27.6738">Withdraw one of my reviews</text><rect fill="#FFFFFF" height="457.375" style="stroke:#181818;stroke-width:1.0;" width="10" x="21" y="127.2813"/><rect fill="#FFFFFF" height="427.8516" style="stroke:#181818;stroke-width:1.0;" width="10" x="212" y="147.8047"/><rect fill="#FFFFFF" height="370.8047" style="stroke:#181818;stroke-width:1.0;" width="10" x="452" y="176.3281"/><rect fill="#FFFFFF" height="28.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="715" y="490.0859"/><rect fill="#FFFFFF" height="28.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="949" y="204.8516"/><rect fill="#FFFFFF" height="85.5703" style="stroke:#181818;stroke-width:1.0;" width="10" x="949" y="261.8984"/><rect fill="#FFFFFF" height="85.5703" style="stroke:#181818;stroke-width:1.0;" width="10" x="949" y="375.9922"/><rect fill="#FFFFFF" height="28.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="1123.5" y="404.5156"/><rect fill="#FFFFFF" height="28.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="1241.5" y="290.4219"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="26" x2="26" y1="117.2813" y2="593.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="216.5" x2="216.5" y1="117.2813" y2="593.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="456.5" x2="456.5" y1="117.2813" y2="593.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="719.5" x2="719.5" y1="117.2813" y2="593.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="953.5" x2="953.5" y1="117.2813" y2="593.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1128.5" x2="1128.5" y1="117.2813" y2="593.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1246.5" x2="1246.5" y1="117.2813" y2="593.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="5" y="114.3145">Client</text><ellipse cx="26" cy="50.1406" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M26,58.1406 L26,85.1406 M13,66.1406 L39,66.1406 M26,85.1406 L13,100.1406 M26,85.1406 L39,100.1406 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="5" y="605.3301">Client</text><ellipse cx="26" cy="616.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M26,624.7969 L26,651.7969 M13,632.7969 L39,632.7969 M26,651.7969 L13,666.7969 M26,651.7969 L39,666.7969 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121" x="156.5" y="86.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="163.5" y="106.3145">ReviewController</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121" x="156.5" y="592.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="163.5" y="612.3301">ReviewController</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197" x="358.5" y="86.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183" x="365.5" y="106.3145">reviewService:ReviewService</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197" x="358.5" y="592.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183" x="365.5" y="612.3301">reviewService:ReviewService</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="235" x="602.5" y="86.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="221" x="609.5" y="106.3145">reviewRepositoryReviewRepository</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="235" x="602.5" y="592.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="221" x="609.5" y="612.3301">reviewRepositoryReviewRepository</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="213" x="847.5" y="86.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="199" x="854.5" y="106.3145">requestService:RequestService</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="213" x="847.5" y="592.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="199" x="854.5" y="612.3301">requestService:RequestService</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="1070.5" y="86.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1077.5" y="106.3145">:ReviewInstance</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="1070.5" y="592.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1077.5" y="612.3301">:ReviewInstance</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="1196.5" y="86.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="1203.5" y="106.3145">:AuthInstance</text><rect fill="#E2E2F0" height="29.6406" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="1196.5" y="592.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="1203.5" y="612.3301">:AuthInstance</text><rect fill="#FFFFFF" height="457.375" style="stroke:#181818;stroke-width:1.0;" width="10" x="21" y="127.2813"/><rect fill="#FFFFFF" height="427.8516" style="stroke:#181818;stroke-width:1.0;" width="10" x="212" y="147.8047"/><rect fill="#FFFFFF" height="370.8047" style="stroke:#181818;stroke-width:1.0;" width="10" x="452" y="176.3281"/><rect fill="#FFFFFF" height="28.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="715" y="490.0859"/><rect fill="#FFFFFF" height="28.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="949" y="204.8516"/><rect fill="#FFFFFF" height="85.5703" style="stroke:#181818;stroke-width:1.0;" width="10" x="949" y="261.8984"/><rect fill="#FFFFFF" height="85.5703" style="stroke:#181818;stroke-width:1.0;" width="10" x="949" y="375.9922"/><rect fill="#FFFFFF" height="28.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="1123.5" y="404.5156"/><rect fill="#FFFFFF" height="28.5234" style="stroke:#181818;stroke-width:1.0;" width="10" x="1241.5" y="290.4219"/><polygon fill="#181818" points="200,143.8047,210,147.8047,200,151.8047,204,147.8047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="31" x2="206" y1="147.8047" y2="147.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="38" y="143.0498">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="49" y="143.0498">DELETE review/{idReview}</text><polygon fill="#181818" points="440,172.3281,450,176.3281,440,180.3281,444,176.3281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="222" x2="446" y1="176.3281" y2="176.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="229" y="171.5732">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="240" y="171.5732">reviewService.deleteById(idReview)</text><polygon fill="#181818" points="937,200.8516,947,204.8516,937,208.8516,941,204.8516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="462" x2="943" y1="204.8516" y2="204.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="469" y="200.0967">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="480" y="200.0967">parseJwt(request)</text><polygon fill="#181818" points="473,229.375,463,233.375,473,237.375,469,233.375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="467" x2="953" y1="233.375" y2="233.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="479" y="228.6201">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="16" x="490" y="228.6201">jwt</text><polygon fill="#181818" points="937,257.8984,947,261.8984,937,265.8984,941,261.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="462" x2="943" y1="261.8984" y2="261.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="469" y="257.1436">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="480" y="257.1436">makeRequestToAuthentication(jwt)</text><polygon fill="#181818" points="1229.5,286.4219,1239.5,290.4219,1229.5,294.4219,1233.5,290.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="959" x2="1235.5" y1="290.4219" y2="290.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="966" y="285.667">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="977" y="285.667">GET /auth/search/{jwt}</text><polygon fill="#181818" points="970,314.9453,960,318.9453,970,322.9453,966,318.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="964" x2="1245.5" y1="318.9453" y2="318.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="976" y="314.1904">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="987" y="314.1904">user</text><polygon fill="#181818" points="473,343.4688,463,347.4688,473,351.4688,469,347.4688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="467" x2="953" y1="347.4688" y2="347.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="479" y="342.7139">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="490" y="342.7139">user</text><polygon fill="#181818" points="937,371.9922,947,375.9922,937,379.9922,941,375.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="462" x2="943" y1="375.9922" y2="375.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="469" y="371.2373">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="480" y="371.2373">retrieveProductFromApi(sku)</text><polygon fill="#181818" points="1111.5,400.5156,1121.5,404.5156,1111.5,408.5156,1115.5,404.5156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="959" x2="1117.5" y1="404.5156" y2="404.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="966" y="399.7607">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="984" y="399.7607">GET /products/{sku}</text><polygon fill="#181818" points="970,429.0391,960,433.0391,970,437.0391,966,433.0391" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="964" x2="1127.5" y1="433.0391" y2="433.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="976" y="428.2842">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="994" y="428.2842">product</text><polygon fill="#181818" points="473,457.5625,463,461.5625,473,465.5625,469,461.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="467" x2="953" y1="461.5625" y2="461.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="479" y="456.8076">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="497" y="456.8076">product</text><polygon fill="#181818" points="703,486.0859,713,490.0859,703,494.0859,707,490.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="462" x2="709" y1="490.0859" y2="490.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="469" y="485.3311">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="487" y="485.3311">reviewRepo.deleteIdReview(idReview))</text><polygon fill="#181818" points="473,514.6094,463,518.6094,473,522.6094,469,518.6094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="467" x2="719" y1="518.6094" y2="518.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="479" y="513.8545">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="497" y="513.8545">ok</text><polygon fill="#181818" points="233,543.1328,223,547.1328,233,551.1328,229,547.1328" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="227" x2="456" y1="547.1328" y2="547.1328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="239" y="542.3779">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="257" y="542.3779">ok</text><polygon fill="#181818" points="42,571.6563,32,575.6563,42,579.6563,38,575.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="36" x2="216" y1="575.6563" y2="575.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="48" y="570.9014">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="66" y="570.9014">ok</text><!--MD5=[1f425e810a4f011afc4917df6974c3a1]
@startuml
'https://plantuml.com/sequence-diagram

title Withdraw one of my reviews
autoactivate on
autonumber

actor "Client" as User
participant "ReviewController" as Ctrl
participant "reviewService:ReviewService" as service
participant "reviewRepositoryReviewRepository" as repo
participant "requestService:RequestService" as request
participant ":ReviewInstance" as instance
participant ":AuthInstance" as instanceAuth




activate User
User -> Ctrl : DELETE review/{idReview}
Ctrl -> service : reviewService.deleteById(idReview)

service -> request : parseJwt(request)
request - -> service: jwt
service -> request: makeRequestToAuthentication(jwt)
request -> instanceAuth: GET /auth/search/{jwt}
instanceAuth - -> request: user
request - -> service: user

service -> request:retrieveProductFromApi(sku)
request -> instance: GET /products/{sku}
instance - -> request: product
request - -> service: product
service -> repo: reviewRepo.deleteIdReview(idReview))

repo - -> service: ok
service - -> Ctrl: ok
Ctrl - -> User: ok



@enduml

@startuml

title Withdraw one of my reviews
autoactivate on
autonumber

actor "Client" as User
participant "ReviewController" as Ctrl
participant "reviewService:ReviewService" as service
participant "reviewRepositoryReviewRepository" as repo
participant "requestService:RequestService" as request
participant ":ReviewInstance" as instance
participant ":AuthInstance" as instanceAuth




activate User
User -> Ctrl : DELETE review/{idReview}
Ctrl -> service : reviewService.deleteById(idReview)

service -> request : parseJwt(request)
request - -> service: jwt
service -> request: makeRequestToAuthentication(jwt)
request -> instanceAuth: GET /auth/search/{jwt}
instanceAuth - -> request: user
request - -> service: user

service -> request:retrieveProductFromApi(sku)
request -> instance: GET /products/{sku}
instance - -> request: product
request - -> service: product
service -> repo: reviewRepo.deleteIdReview(idReview))

repo - -> service: ok
service - -> Ctrl: ok
Ctrl - -> User: ok



@enduml

PlantUML version 1.2022.12(Sun Oct 23 19:12:26 WEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>