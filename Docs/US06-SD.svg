<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1349px" preserveAspectRatio="none" style="width:1868px;height:1349px;background:#FFFFFF;" version="1.1" viewBox="0 0 1868 1349" width="1868px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="120" x="873.25" y="30.1074">Vote for a review</text><rect fill="#FFFFFF" height="975.4785" style="stroke:#181818;stroke-width:1.0;" width="10" x="21" y="281.6973"/><rect fill="#FFFFFF" height="935.1875" style="stroke:#181818;stroke-width:1.0;" width="10" x="196" y="312.9883"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="271" y="807.6836"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="374" y="883.2656"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="477" y="958.8477"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="580" y="1034.4297"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="683" y="1110.0117"/><rect fill="#FFFFFF" height="872.6055" style="stroke:#181818;stroke-width:1.0;" width="10" x="793.5" y="344.2793"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1070.5" y="375.5703"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1276.5" y="713.8105"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1448.5" y="451.1523"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1581" y="513.7344"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1581" y="651.2285"/><rect fill="#FFFFFF" height="1100.6426" style="stroke:#181818;stroke-width:1.0;" width="10" x="1799" y="156.5332"/><rect fill="#FFFFFF" height="1069.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1804" y="187.8242"/><rect fill="#FFFFFF" height="1038.0605" style="stroke:#181818;stroke-width:1.0;" width="10" x="1809" y="219.1152"/><rect fill="#FFFFFF" height="1006.7695" style="stroke:#181818;stroke-width:1.0;" width="10" x="1814" y="250.4063"/><rect fill="#FFFFFF" height="975.4785" style="stroke:#181818;stroke-width:1.0;" width="10" x="1819" y="281.6973"/><rect fill="#FFFFFF" height="480.7832" style="stroke:#181818;stroke-width:1.0;" width="10" x="1824" y="776.3926"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="26" x2="26" y1="123.2422" y2="1266.1758"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="200.5" x2="200.5" y1="123.2422" y2="1266.1758"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="275.5" x2="275.5" y1="123.2422" y2="1266.1758"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="379" x2="379" y1="123.2422" y2="1266.1758"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="482" x2="482" y1="123.2422" y2="1266.1758"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="584.5" x2="584.5" y1="123.2422" y2="1266.1758"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="687.5" x2="687.5" y1="123.2422" y2="1266.1758"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="798.5" x2="798.5" y1="123.2422" y2="1266.1758"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1075.5" x2="1075.5" y1="123.2422" y2="1266.1758"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1281.5" x2="1281.5" y1="123.2422" y2="1266.1758"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1453.5" x2="1453.5" y1="123.2422" y2="1266.1758"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1585.5" x2="1585.5" y1="123.2422" y2="1266.1758"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1698.5" x2="1698.5" y1="584.8359" y2="1266.1758"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1803.5" x2="1803.5" y1="123.2422" y2="1266.1758"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="5" y="119.7285">Client</text><ellipse cx="26" cy="53.1211" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M26,61.1211 L26,88.1211 M13,69.1211 L39,69.1211 M26,88.1211 L13,103.1211 M26,88.1211 L39,103.1211 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="5" y="1280.2832">Client</text><ellipse cx="26" cy="1292.2969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M26,1300.2969 L26,1327.2969 M13,1308.2969 L39,1308.2969 M26,1327.2969 L13,1342.2969 M26,1327.2969 L39,1342.2969 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="57" x="172.5" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="179.5" y="111.7285">:VoteC</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="57" x="172.5" y="1265.1758"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="179.5" y="1287.2832">:VoteC</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="73" x="239.5" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="246.5" y="111.7285">:VoteC_n</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="73" x="239.5" y="1265.1758"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="246.5" y="1287.2832">:VoteC_n</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="58" x="350" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="357" y="111.7285">:VoteQ</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="58" x="350" y="1265.1758"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="357" y="1287.2832">:VoteQ</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="74" x="445" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="452" y="111.7285">:VoteQ_n</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="74" x="445" y="1265.1758"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="452" y="1287.2832">:VoteQ_n</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="73" x="548.5" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="555.5" y="111.7285">:ReviewC</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="73" x="548.5" y="1265.1758"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="555.5" y="1287.2832">:ReviewC</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89" x="643.5" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="650.5" y="111.7285">:ReviewC_n</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89" x="643.5" y="1265.1758"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="650.5" y="1287.2832">:ReviewC_n</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="742.5" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="749.5" y="111.7285">VotesController</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="742.5" y="1265.1758"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="749.5" y="1287.2832">VotesController</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="182" x="984.5" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168" x="991.5" y="111.7285">votesService:VotesService</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="182" x="984.5" y="1265.1758"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168" x="991.5" y="1287.2832">votesService:VotesService</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="210" x="1176.5" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="196" x="1183.5" y="111.7285">voteRepository:VoteRepository</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="210" x="1176.5" y="1265.1758"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="196" x="1183.5" y="1287.2832">voteRepository:VoteRepository</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="114" x="1396.5" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="1403.5" y="111.7285">:JWTRepository</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="114" x="1396.5" y="1265.1758"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="1403.5" y="1287.2832">:JWTRepository</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131" x="1520.5" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="1527.5" y="111.7285">:ReviewRepository</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131" x="1520.5" y="1265.1758"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="1527.5" y="1287.2832">:ReviewRepository</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="74" x="1661.5" y="1265.1758"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="1668.5" y="1287.2832">vote:Vote</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117" x="1745.5" y="89.6211"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="1752.5" y="111.7285">:MessageBroker</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117" x="1745.5" y="1265.1758"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="1752.5" y="1287.2832">:MessageBroker</text><rect fill="#FFFFFF" height="975.4785" style="stroke:#181818;stroke-width:1.0;" width="10" x="21" y="281.6973"/><rect fill="#FFFFFF" height="935.1875" style="stroke:#181818;stroke-width:1.0;" width="10" x="196" y="312.9883"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="271" y="807.6836"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="374" y="883.2656"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="477" y="958.8477"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="580" y="1034.4297"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="683" y="1110.0117"/><rect fill="#FFFFFF" height="872.6055" style="stroke:#181818;stroke-width:1.0;" width="10" x="793.5" y="344.2793"/><rect fill="#FFFFFF" height="37.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1070.5" y="375.5703"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1276.5" y="713.8105"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1448.5" y="451.1523"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1581" y="513.7344"/><rect fill="#FFFFFF" height="31.291" style="stroke:#181818;stroke-width:1.0;" width="10" x="1581" y="651.2285"/><rect fill="#FFFFFF" height="1100.6426" style="stroke:#181818;stroke-width:1.0;" width="10" x="1799" y="156.5332"/><rect fill="#FFFFFF" height="1069.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1804" y="187.8242"/><rect fill="#FFFFFF" height="1038.0605" style="stroke:#181818;stroke-width:1.0;" width="10" x="1809" y="219.1152"/><rect fill="#FFFFFF" height="1006.7695" style="stroke:#181818;stroke-width:1.0;" width="10" x="1814" y="250.4063"/><rect fill="#FFFFFF" height="975.4785" style="stroke:#181818;stroke-width:1.0;" width="10" x="1819" y="281.6973"/><rect fill="#FFFFFF" height="480.7832" style="stroke:#181818;stroke-width:1.0;" width="10" x="1824" y="776.3926"/><polygon fill="#181818" points="1787,152.5332,1797,156.5332,1787,160.5332,1791,156.5332" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="276" x2="1793" y1="156.5332" y2="156.5332"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="283" y="151.2705">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="294" y="151.2705">subscribe "Vote.created"</text><polygon fill="#181818" points="1792,183.8242,1802,187.8242,1792,191.8242,1796,187.8242" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="379" x2="1798" y1="187.8242" y2="187.8242"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="386" y="182.5615">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="397" y="182.5615">subscribe "Vote.created"</text><polygon fill="#181818" points="1797,215.1152,1807,219.1152,1797,223.1152,1801,219.1152" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="482" x2="1803" y1="219.1152" y2="219.1152"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="489" y="213.8525">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="500" y="213.8525">subscribe "Vote.created"</text><polygon fill="#181818" points="1802,246.4063,1812,250.4063,1802,254.4063,1806,250.4063" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="585" x2="1808" y1="250.4063" y2="250.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="592" y="245.1436">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="603" y="245.1436">subscribe "Vote.created"</text><polygon fill="#181818" points="1807,277.6973,1817,281.6973,1807,285.6973,1811,281.6973" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="688" x2="1813" y1="281.6973" y2="281.6973"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="695" y="276.4346">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="706" y="276.4346">subscribe "Vote.created"</text><polygon fill="#181818" points="184,308.9883,194,312.9883,184,316.9883,188,312.9883" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="31" x2="190" y1="312.9883" y2="312.9883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="38" y="307.7256">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="49" y="307.7256">POST /votes/{idReview}</text><polygon fill="#181818" points="781.5,340.2793,791.5,344.2793,781.5,348.2793,785.5,344.2793" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="206" x2="787.5" y1="344.2793" y2="344.2793"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="213" y="339.0166">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="224" y="339.0166">POST /votes/{idReview}</text><polygon fill="#181818" points="1058.5,371.5703,1068.5,375.5703,1058.5,379.5703,1062.5,375.5703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="803.5" x2="1064.5" y1="375.5703" y2="375.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="810.5" y="370.3076">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237" x="821.5" y="370.3076">service.create(resource,idReview,idUser);</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1080.5" x2="1122.5" y1="411.8613" y2="411.8613"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1122.5" x2="1122.5" y1="411.8613" y2="424.8613"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1075.5" x2="1122.5" y1="424.8613" y2="424.8613"/><polygon fill="#181818" points="1085.5,420.8613,1075.5,424.8613,1085.5,428.8613,1081.5,424.8613" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="1087.5" y="406.5986">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="1098.5" y="406.5986">parseJwt(request)</text><polygon fill="#181818" points="1436.5,447.1523,1446.5,451.1523,1436.5,455.1523,1440.5,451.1523" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1075.5" x2="1442.5" y1="451.1523" y2="451.1523"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1082.5" y="445.8896">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="1100.5" y="445.8896">findByJWT(jwt)</text><polygon fill="#181818" points="1086.5,478.4434,1076.5,482.4434,1086.5,486.4434,1082.5,482.4434" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1080.5" x2="1452.5" y1="482.4434" y2="482.4434"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1092.5" y="477.1807">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="1110.5" y="477.1807">user</text><polygon fill="#181818" points="1569,509.7344,1579,513.7344,1569,517.7344,1573,513.7344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1075.5" x2="1575" y1="513.7344" y2="513.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1082.5" y="508.4717">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="1100.5" y="508.4717">findById(reviewId)</text><polygon fill="#181818" points="1086.5,541.0254,1076.5,545.0254,1086.5,549.0254,1082.5,545.0254" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1080.5" x2="1585" y1="545.0254" y2="545.0254"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1092.5" y="539.7627">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="1110.5" y="539.7627">review</text><polygon fill="#181818" points="1649.5,572.3164,1659.5,576.3164,1649.5,580.3164,1653.5,576.3164" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1075.5" x2="1655.5" y1="576.3164" y2="576.3164"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1082.5" y="571.0537">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="1100.5" y="571.0537">new(resource.getVote(),user.getId,reviewId)</text><rect fill="#E2E2F0" height="32.6211" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="74" x="1661.5" y="553.0254"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="1668.5" y="575.1328">vote:Vote</text><polygon fill="#181818" points="1086.5,615.9375,1076.5,619.9375,1086.5,623.9375,1082.5,619.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1080.5" x2="1697.5" y1="619.9375" y2="619.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1092.5" y="614.6748">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23" x="1110.5" y="614.6748">vote</text><polygon fill="#181818" points="1569,647.2285,1579,651.2285,1569,655.2285,1573,651.2285" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1075.5" x2="1575" y1="651.2285" y2="651.2285"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1082.5" y="645.9658">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="251" x="1100.5" y="645.9658">updateReview(reviewId), resource.getVote())</text><polygon fill="#181818" points="1086.5,678.5195,1076.5,682.5195,1086.5,686.5195,1082.5,682.5195" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1080.5" x2="1585" y1="682.5195" y2="682.5195"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1092.5" y="677.2568">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="1110.5" y="677.2568">ok</text><polygon fill="#181818" points="1264.5,709.8105,1274.5,713.8105,1264.5,717.8105,1268.5,713.8105" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1075.5" x2="1270.5" y1="713.8105" y2="713.8105"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1082.5" y="708.5479">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="1100.5" y="708.5479">save(vote)</text><polygon fill="#181818" points="1086.5,741.1016,1076.5,745.1016,1086.5,749.1016,1082.5,745.1016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1080.5" x2="1280.5" y1="745.1016" y2="745.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1092.5" y="739.8389">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="1110.5" y="739.8389">ok</text><polygon fill="#181818" points="1812,772.3926,1822,776.3926,1812,780.3926,1816,776.3926" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1075.5" x2="1818" y1="776.3926" y2="776.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1082.5" y="771.1299">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="1100.5" y="771.1299">publish "Vote.created, {Vote}"</text><polygon fill="#181818" points="292,803.6836,282,807.6836,292,811.6836,288,807.6836" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="286" x2="1823" y1="807.6836" y2="807.6836"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="298" y="802.4209">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="316" y="802.4209">notify "Vote.created, {Vote}"</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="281" x2="323" y1="843.9746" y2="843.9746"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="323" x2="323" y1="843.9746" y2="856.9746"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="276" x2="323" y1="856.9746" y2="856.9746"/><polygon fill="#181818" points="286,852.9746,276,856.9746,286,860.9746,282,856.9746" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="288" y="838.7119">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="306" y="838.7119">save(Vote)</text><polygon fill="#181818" points="395,879.2656,385,883.2656,395,887.2656,391,883.2656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="389" x2="1823" y1="883.2656" y2="883.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="401" y="878.0029">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="419" y="878.0029">notify "Vote.created, {Vote}"</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="384" x2="426" y1="919.5566" y2="919.5566"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="426" x2="426" y1="919.5566" y2="932.5566"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="379" x2="426" y1="932.5566" y2="932.5566"/><polygon fill="#181818" points="389,928.5566,379,932.5566,389,936.5566,385,932.5566" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="391" y="914.2939">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="409" y="914.2939">save(Vote)</text><polygon fill="#181818" points="498,954.8477,488,958.8477,498,962.8477,494,958.8477" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="492" x2="1823" y1="958.8477" y2="958.8477"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="504" y="953.585">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="522" y="953.585">notify "Vote.created, {Vote}"</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="487" x2="529" y1="995.1387" y2="995.1387"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="529" x2="529" y1="995.1387" y2="1008.1387"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="482" x2="529" y1="1008.1387" y2="1008.1387"/><polygon fill="#181818" points="492,1004.1387,482,1008.1387,492,1012.1387,488,1008.1387" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="494" y="989.876">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="512" y="989.876">save(Vote)</text><polygon fill="#181818" points="601,1030.4297,591,1034.4297,601,1038.4297,597,1034.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="595" x2="1823" y1="1034.4297" y2="1034.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="607" y="1029.167">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="625" y="1029.167">notify "Vote.created, {Vote}"</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="590" x2="632" y1="1070.7207" y2="1070.7207"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="632" x2="632" y1="1070.7207" y2="1083.7207"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="585" x2="632" y1="1083.7207" y2="1083.7207"/><polygon fill="#181818" points="595,1079.7207,585,1083.7207,595,1087.7207,591,1083.7207" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="597" y="1065.458">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="615" y="1065.458">save(Vote)</text><polygon fill="#181818" points="704,1106.0117,694,1110.0117,704,1114.0117,700,1110.0117" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="698" x2="1823" y1="1110.0117" y2="1110.0117"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="710" y="1104.749">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="728" y="1104.749">notify "Vote.created, {Vote}"</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="693" x2="735" y1="1146.3027" y2="1146.3027"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="735" x2="735" y1="1146.3027" y2="1159.3027"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="688" x2="735" y1="1159.3027" y2="1159.3027"/><polygon fill="#181818" points="698,1155.3027,688,1159.3027,698,1163.3027,694,1159.3027" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="700" y="1141.04">30</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="718" y="1141.04">save(Vote)</text><polygon fill="#181818" points="814.5,1181.5938,804.5,1185.5938,814.5,1189.5938,810.5,1185.5938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="808.5" x2="1074.5" y1="1185.5938" y2="1185.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="820.5" y="1180.3311">31</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="838.5" y="1180.3311">ok</text><polygon fill="#181818" points="217,1212.8848,207,1216.8848,217,1220.8848,213,1216.8848" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="211" x2="797.5" y1="1216.8848" y2="1216.8848"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="223" y="1211.6221">32</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="241" y="1211.6221">ok</text><polygon fill="#181818" points="42,1244.1758,32,1248.1758,42,1252.1758,38,1248.1758" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="36" x2="200" y1="1248.1758" y2="1248.1758"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="48" y="1242.9131">33</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="66" y="1242.9131">ok</text><!--MD5=[e4a0d59b71663c7ec09cb04c41e7814a]
@startuml
'https://plantuml.com/sequence-diagram

title Vote for a review
autoactivate on
autonumber

actor "Client" as User
participant ":VoteC" as voteC
participant ":VoteC_n" as voteC_n
participant ":VoteQ" as voteQ
participant ":VoteQ_n" as voteQ_n
participant ":ReviewC" as reviewC
participant ":ReviewC_n" as reviewC_n
participant "VotesController" as Ctrl
participant "votesService:VotesService" as service
participant "voteRepository:VoteRepository" as repo
participant ":JWTRepository" as jwtRepository
participant ":ReviewRepository" as reviewRepository

participant "vote:Vote" as vote
participant ":MessageBroker" as broker


voteC_n -> broker: subscribe "Vote.created"
voteQ -> broker: subscribe "Vote.created"
voteQ_n -> broker: subscribe "Vote.created"
reviewC -> broker: subscribe "Vote.created"
reviewC_n -> broker: subscribe "Vote.created"

activate User
User -> voteC : POST /votes/{idReview}
voteC -> Ctrl:  POST /votes/{idReview}
Ctrl -> service : service.create(resource,idReview,idUser);
service - -> service: parseJwt(request)

service -> jwtRepository: findByJWT(jwt)
jwtRepository - -> service: user

service -> reviewRepository:findById(reviewId)
reviewRepository - -> service: review

service -> vote**: new(resource.getVote(),user.getId,reviewId)
vote - -> service: vote
service -> reviewRepository: updateReview(reviewId), resource.getVote())
reviewRepository - -> service: ok
service -> repo: save(vote)
repo - -> service: ok
service -> broker: publish "Vote.created, {Vote}"

voteC_n <- broker: notify "Vote.created, {Vote}"
voteC_n - -> voteC_n: save(Vote)
voteQ <- broker: notify "Vote.created, {Vote}"
voteQ - -> voteQ: save(Vote)
voteQ_n <- broker: notify "Vote.created, {Vote}"
voteQ_n - -> voteQ_n: save(Vote)
reviewC <- broker: notify "Vote.created, {Vote}"
reviewC - -> reviewC: save(Vote)
reviewC_n <- broker: notify "Vote.created, {Vote}"
reviewC_n - -> reviewC_n: save(Vote)

service - -> Ctrl: ok
Ctrl - -> voteC: ok
voteC - -> User: ok

@enduml

@startuml

title Vote for a review
autoactivate on
autonumber

actor "Client" as User
participant ":VoteC" as voteC
participant ":VoteC_n" as voteC_n
participant ":VoteQ" as voteQ
participant ":VoteQ_n" as voteQ_n
participant ":ReviewC" as reviewC
participant ":ReviewC_n" as reviewC_n
participant "VotesController" as Ctrl
participant "votesService:VotesService" as service
participant "voteRepository:VoteRepository" as repo
participant ":JWTRepository" as jwtRepository
participant ":ReviewRepository" as reviewRepository

participant "vote:Vote" as vote
participant ":MessageBroker" as broker


voteC_n -> broker: subscribe "Vote.created"
voteQ -> broker: subscribe "Vote.created"
voteQ_n -> broker: subscribe "Vote.created"
reviewC -> broker: subscribe "Vote.created"
reviewC_n -> broker: subscribe "Vote.created"

activate User
User -> voteC : POST /votes/{idReview}
voteC -> Ctrl:  POST /votes/{idReview}
Ctrl -> service : service.create(resource,idReview,idUser);
service - -> service: parseJwt(request)

service -> jwtRepository: findByJWT(jwt)
jwtRepository - -> service: user

service -> reviewRepository:findById(reviewId)
reviewRepository - -> service: review

service -> vote**: new(resource.getVote(),user.getId,reviewId)
vote - -> service: vote
service -> reviewRepository: updateReview(reviewId), resource.getVote())
reviewRepository - -> service: ok
service -> repo: save(vote)
repo - -> service: ok
service -> broker: publish "Vote.created, {Vote}"

voteC_n <- broker: notify "Vote.created, {Vote}"
voteC_n - -> voteC_n: save(Vote)
voteQ <- broker: notify "Vote.created, {Vote}"
voteQ - -> voteQ: save(Vote)
voteQ_n <- broker: notify "Vote.created, {Vote}"
voteQ_n - -> voteQ_n: save(Vote)
reviewC <- broker: notify "Vote.created, {Vote}"
reviewC - -> reviewC: save(Vote)
reviewC_n <- broker: notify "Vote.created, {Vote}"
reviewC_n - -> reviewC_n: save(Vote)

service - -> Ctrl: ok
Ctrl - -> voteC: ok
voteC - -> User: ok

@enduml

PlantUML version 1.2022.13(Sat Nov 19 13:22:17 WET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>